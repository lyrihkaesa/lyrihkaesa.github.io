"use strict";(self.webpackChunkio_github_lyrihkaesa=self.webpackChunkio_github_lyrihkaesa||[]).push([["9531"],{90258:function(e,n,a){a.r(n),a.d(n,{default:()=>h,frontMatter:()=>d,metadata:()=>r,assets:()=>o,toc:()=>c,contentTitle:()=>s});var r=JSON.parse('{"id":"docker/laravel-docker","title":"Laravel Docker","description":"Tambahkan User ke Grup Docker","source":"@site/articles/learning/08-docker/01-laravel-docker.md","sourceDirName":"08-docker","slug":"/docker/laravel-docker","permalink":"/learning/docker/laravel-docker","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Installation Docker Desktop","permalink":"/learning/docker/docker-desktop"},"next":{"title":"PlantUML Docker","permalink":"/learning/docker/plantuml-docker"}}'),i=a("85893"),l=a("50065");let d={},s="Laravel Docker",o={},c=[{value:"Tambahkan User ke Grup Docker",id:"tambahkan-user-ke-grup-docker",level:2},{value:"Mengidentifikasi User dan Grup <code>kaesa</code>",id:"mengidentifikasi-user-dan-grup-kaesa",level:3},{value:"Mengubah Pemilik File dan Direktori",id:"mengubah-pemilik-file-dan-direktori",level:3},{value:"Memeriksa Perubahan",id:"memeriksa-perubahan",level:3},{value:"Image <code>php:8.3-fpm</code>",id:"image-php83-fpm",level:2},{value:"[GAGAL] Percobaan <code>Dockerfile</code> 01",id:"gagal-percobaan-dockerfile-01",level:2},{value:"Build Image Docker",id:"build-image-docker",level:2},{value:"Menjalankan Docker Compose",id:"menjalankan-docker-compose",level:2},{value:"Menghentikan Docker Compose",id:"menghentikan-docker-compose",level:2},{value:"Eksekusi Terminal Container",id:"eksekusi-terminal-container",level:2},{value:"Docker Build",id:"docker-build",level:2},{value:"Docker Lihat Semua Image",id:"docker-lihat-semua-image",level:2},{value:"Docker Remove/Hapus Image",id:"docker-removehapus-image",level:2},{value:"Error Model Baru NotFoud",id:"error-model-baru-notfoud",level:2}];function t(e){let n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,l.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"laravel-docker",children:"Laravel Docker"})}),"\n",(0,i.jsx)(n.h2,{id:"tambahkan-user-ke-grup-docker",children:"Tambahkan User ke Grup Docker"}),"\n",(0,i.jsxs)(n.p,{children:["Jalankan perintah berikut untuk menambahkan user ",(0,i.jsx)(n.code,{children:"kaesa"})," ke grup ",(0,i.jsx)(n.code,{children:"docker"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"sudo usermod -aG docker kaesa\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"-aG"}),": Menambahkan user ke grup tanpa menghapusnya dari grup lain."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"docker"}),": Nama grup yang ingin Anda tambahkan."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"kaesa"}),": Nama user yang ingin Anda tambahkan ke grup."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["Jangan lupa untuk logout dan login kembali. Setelah menambahkan user ",(0,i.jsx)(n.code,{children:"kaesa"})," ke grup ",(0,i.jsx)(n.code,{children:"docker"}),", Anda perlu logout dan login kembali untuk perubahan mengambil efek."]}),"\n",(0,i.jsxs)(n.h3,{id:"mengidentifikasi-user-dan-grup-kaesa",children:["Mengidentifikasi User dan Grup ",(0,i.jsx)(n.code,{children:"kaesa"})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"id kaesa\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Output-nya akan menunjukkan UID dan GID untuk user ",(0,i.jsx)(n.code,{children:"kaesa"}),"."]}),"\n",(0,i.jsx)(n.h3,{id:"mengubah-pemilik-file-dan-direktori",children:"Mengubah Pemilik File dan Direktori"}),"\n",(0,i.jsxs)(n.p,{children:["Gunakan perintah ",(0,i.jsx)(n.code,{children:"chown"})," untuk mengubah pemilik file dan direktori di project Anda menjadi user ",(0,i.jsx)(n.code,{children:"kaesa"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"sudo chown -R kaesa:kaesa /var/www/pondokmbodo\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Ini akan mengubah pemilik semua file dan direktori dalam project tersebut menjadi user ",(0,i.jsx)(n.code,{children:"kaesa"}),"."]}),"\n",(0,i.jsx)(n.h3,{id:"memeriksa-perubahan",children:"Memeriksa Perubahan"}),"\n",(0,i.jsxs)(n.p,{children:["Setelah menjalankan perintah ",(0,i.jsx)(n.code,{children:"chown"}),", Anda dapat memeriksa apakah perubahan sudah diterapkan dengan benar:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"ls -l /var/www/pondokmbodo\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Output-nya akan menunjukkan bahwa semua file dan directory sekarang dimiliki oleh user ",(0,i.jsx)(n.code,{children:"kaesa"}),"."]}),"\n",(0,i.jsxs)(n.h2,{id:"image-php83-fpm",children:["Image ",(0,i.jsx)(n.code,{children:"php:8.3-fpm"})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-txt",children:"root@19832473a525:/var/www/html# php -m\r\n[PHP Modules]\r\nCore\r\nctype\r\ncurl\r\ndate\r\ndom\r\nfileinfo\r\nfilter\r\nhash\r\niconv\r\njson\r\nlibxml\r\nmbstring\r\nmysqlnd\r\nopenssl\r\npcre\r\nPDO\r\npdo_sqlite\r\nPhar\r\nposix\r\nrandom\r\nreadline\r\nReflection\r\nsession\r\nSimpleXML\r\nsodium\r\nSPL\r\nsqlite3\r\nstandard\r\ntokenizer\r\nxml\r\nxmlreader\r\nxmlwriter\r\nzlib\r\n\r\n[Zend Modules]\n"})}),"\n",(0,i.jsxs)(n.h2,{id:"gagal-percobaan-dockerfile-01",children:["[GAGAL] Percobaan ",(0,i.jsx)(n.code,{children:"Dockerfile"})," 01"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-Dockerfile",children:'# Menggunakan image resmi PHP-FPM\r\nFROM php:8.3-fpm\r\n\r\n# Menetapkan direktori kerja dalam container\r\nWORKDIR /var/www/html\r\n\r\n# Menginstal dependensi yang diperlukan\r\n# mix\r\nRUN apt-get update \\\r\n    && apt-get install -y build-essential zlib1g-dev default-mysql-client curl gnupg procps vim git unzip libzip-dev libpq-dev \\\r\n    && docker-php-ext-install zip pdo_mysql pdo_pgsql pgsql\r\n\r\n# intl\r\nRUN apt-get install -y libicu-dev \\\r\n    && docker-php-ext-configure intl \\\r\n    && docker-php-ext-install intl\r\n\r\n# gd\r\nRUN apt-get install -y libfreetype6-dev libjpeg62-turbo-dev libpng-dev && \\\r\n    docker-php-ext-configure gd --with-freetype=/usr/include/ --with-jpeg=/usr/include/ && \\\r\n    docker-php-ext-install gd\r\n\r\n# Menginstal Composer secara manual\r\nRUN curl -sS https://getcomposer.org/installer | php -- --install-dir=/usr/local/bin --filename=composer\r\n\r\n# Menginstal Node.js dan npm\r\nRUN curl -sL https://deb.nodesource.com/setup_20.x | bash - \\\r\n    && apt-get install -y nodejs\r\n\r\n# Menyalin file aplikasi Laravel ke dalam container\r\nCOPY . .\r\n\r\n# Menjalankan Composer untuk menginstal dependensi Laravel\r\nRUN composer install --no-dev --optimize-autoloader\r\n\r\n# Menjalankan npm untuk menginstal dependensi frontend\r\nRUN npm install && npm run build\r\n\r\n# Menetapkan izin untuk direktori Laravel\r\nRUN chown -R www-data:www-data /var/www/html/storage /var/www/html/bootstrap/cache\r\nRUN chmod -R 775 /var/www/html/storage /var/www/html/bootstrap/cache\r\n\r\n# Mengekspos port yang digunakan oleh PHP-FPM\r\nEXPOSE 9000\r\n\r\n# Menjalankan PHP-FPM\r\nCMD ["php-fpm"]\r\n\n'})}),"\n",(0,i.jsx)(n.h2,{id:"build-image-docker",children:"Build Image Docker"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker compose build\n"})}),"\n",(0,i.jsx)(n.h2,{id:"menjalankan-docker-compose",children:"Menjalankan Docker Compose"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker compose up\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker compose -p pondokmbodo up -d\n"})}),"\n",(0,i.jsx)(n.h2,{id:"menghentikan-docker-compose",children:"Menghentikan Docker Compose"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker compose down\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker compose -p pondokmbodo down\n"})}),"\n",(0,i.jsx)(n.h2,{id:"eksekusi-terminal-container",children:"Eksekusi Terminal Container"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"sudo docker exec -it pondokmbodo-app-1 sh\n"})}),"\n",(0,i.jsx)(n.p,{children:"Jika tidak bisa:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"sudo docker exec -it pondokmbodo-app-1 bash\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"sudo chmod -R 775 /var/www/html/storage\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"sudo chown -R www-data:www-data /var/www/html/storage\n"})}),"\n",(0,i.jsx)(n.p,{children:"Jika error storage permission ketik perintah ini:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"sudo chown -R www-data:www-data /var/www/html/storage/*\n"})}),"\n",(0,i.jsx)(n.p,{children:"Jika ingin performa baik:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"php artisan optimize:clear\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"php artisan optimize\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"php artisan icons:cache\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"npm run build\n"})}),"\n",(0,i.jsx)(n.h2,{id:"docker-build",children:"Docker Build"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker build -t lyrihkaesa/pondokmbodo:1.0.0-dev .\n"})}),"\n",(0,i.jsx)(n.h2,{id:"docker-lihat-semua-image",children:"Docker Lihat Semua Image"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker image ls\n"})}),"\n",(0,i.jsx)(n.h2,{id:"docker-removehapus-image",children:"Docker Remove/Hapus Image"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker image rm random-id-image\n"})}),"\n",(0,i.jsx)(n.h2,{id:"error-model-baru-notfoud",children:"Error Model Baru NotFoud"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"composer dump-autoload\n"})})]})}function h(e={}){let{wrapper:n}={...(0,l.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(t,{...e})}):t(e)}},50065:function(e,n,a){a.d(n,{Z:function(){return s},a:function(){return d}});var r=a(67294);let i={},l=r.createContext(i);function d(e){let n=r.useContext(l);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:d(e.components),r.createElement(l.Provider,{value:n},e.children)}}}]);