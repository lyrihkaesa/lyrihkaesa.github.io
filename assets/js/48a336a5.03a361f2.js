"use strict";(self.webpackChunkio_github_lyrihkaesa=self.webpackChunkio_github_lyrihkaesa||[]).push([["4844"],{53321:function(e,s,n){n.r(s),n.d(s,{default:()=>h,frontMatter:()=>l,metadata:()=>r,assets:()=>d,toc:()=>c,contentTitle:()=>a});var r=JSON.parse('{"id":"laravel-api-list","title":"\uD83D\uDCC4 Dokumentasi API: List User (Best Practice)","description":"1\uFE0F\u20E3 Endpoint","source":"@site/articles/laravel/36-laravel-api-list.md","sourceDirName":".","slug":"/laravel-api-list","permalink":"/laravel/laravel-api-list","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":36,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"laravel-filament-v3-with-tailwindcss-v4","permalink":"/laravel/laravel-filament-v3-with-tailwindcss-v4"},"next":{"title":"Kenapa saat menggunakan Http::get() dua kali, selalu mendapatkan timeout?","permalink":"/laravel/masalah-laragon-01-multiple-http-get-timeout"}}'),i=n("85893"),t=n("50065");let l={},a="\uD83D\uDCC4 Dokumentasi API: List User (Best Practice)",d={},c=[{value:"1\uFE0F\u20E3 Endpoint",id:"1\uFE0F\u20E3-endpoint",level:2},{value:"2\uFE0F\u20E3 Query Parameters",id:"2\uFE0F\u20E3-query-parameters",level:2},{value:"3\uFE0F\u20E3 Response Format",id:"3\uFE0F\u20E3-response-format",level:2},{value:"3.1 Offset Pagination",id:"31-offset-pagination",level:3},{value:"3.2 Cursor-based Pagination (Sederhana)",id:"32-cursor-based-pagination-sederhana",level:3},{value:"4\uFE0F\u20E3 Filter Handling",id:"4\uFE0F\u20E3-filter-handling",level:2},{value:"5\uFE0F\u20E3 Permissions",id:"5\uFE0F\u20E3-permissions",level:2},{value:"5.1 Global permissions (halaman / tombol umum)",id:"51-global-permissions-halaman--tombol-umum",level:3},{value:"5.2 Per-item permissions (aksi individual)",id:"52-per-item-permissions-aksi-individual",level:3},{value:"6\uFE0F\u20E3 Backend Laravel Example (Controller)",id:"6\uFE0F\u20E3-backend-laravel-example-controller",level:2},{value:"Best Practices Ringkas",id:"best-practices-ringkas",level:2}];function o(e){let s={blockquote:"blockquote",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.header,{children:(0,i.jsx)(s.h1,{id:"-dokumentasi-api-list-user-best-practice",children:"\uD83D\uDCC4 Dokumentasi API: List User (Best Practice)"})}),"\n",(0,i.jsx)(s.h2,{id:"1\uFE0F\u20E3-endpoint",children:"1\uFE0F\u20E3 Endpoint"}),"\n",(0,i.jsxs)(s.table,{children:[(0,i.jsx)(s.thead,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.th,{children:"Method"}),(0,i.jsx)(s.th,{children:"URL"}),(0,i.jsx)(s.th,{children:"Description"})]})}),(0,i.jsx)(s.tbody,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"GET"}),(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"/users"})}),(0,i.jsx)(s.td,{children:"Fetch list of users"})]})})]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h2,{id:"2\uFE0F\u20E3-query-parameters",children:"2\uFE0F\u20E3 Query Parameters"}),"\n",(0,i.jsxs)(s.table,{children:[(0,i.jsx)(s.thead,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.th,{children:"Parameter"}),(0,i.jsx)(s.th,{children:"Type"}),(0,i.jsx)(s.th,{children:"Description"})]})}),(0,i.jsxs)(s.tbody,{children:[(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"page"})}),(0,i.jsx)(s.td,{children:"int"}),(0,i.jsx)(s.td,{children:"Page number (offset pagination, default: 1)"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"limit"})}),(0,i.jsx)(s.td,{children:"int"}),(0,i.jsx)(s.td,{children:"Number of items per page (default: 20)"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"last_id"})}),(0,i.jsx)(s.td,{children:"int"}),(0,i.jsxs)(s.td,{children:["Cursor-based pagination, ambil record dengan ",(0,i.jsx)(s.code,{children:"id > last_id"})]})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"role"})}),(0,i.jsx)(s.td,{children:"string"}),(0,i.jsx)(s.td,{children:"Filter by user role"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"status"})}),(0,i.jsx)(s.td,{children:"string"}),(0,i.jsx)(s.td,{children:"Filter by user status"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"created_after"})}),(0,i.jsx)(s.td,{children:"date"}),(0,i.jsx)(s.td,{children:"Filter users created after this date"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"search"})}),(0,i.jsx)(s.td,{children:"string"}),(0,i.jsx)(s.td,{children:"Full-text search (keyword search + optional advanced query)"})]})]})]}),"\n",(0,i.jsxs)(s.blockquote,{children:["\n",(0,i.jsx)(s.p,{children:"Notes:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["Jika ",(0,i.jsx)(s.code,{children:"last_id"})," diberikan \u2192 ",(0,i.jsx)(s.strong,{children:"cursor-based pagination"})]}),"\n",(0,i.jsxs)(s.li,{children:["Jika ",(0,i.jsx)(s.code,{children:"last_id"})," tidak ada \u2192 ",(0,i.jsx)(s.strong,{children:"offset pagination"})]}),"\n",(0,i.jsx)(s.li,{children:"Filter opsional, bisa dikombinasi"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h2,{id:"3\uFE0F\u20E3-response-format",children:"3\uFE0F\u20E3 Response Format"}),"\n",(0,i.jsx)(s.h3,{id:"31-offset-pagination",children:"3.1 Offset Pagination"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-json",children:'{\n  "data": [\n    {\n      "id": 1,\n      "name": "John Doe",\n      "email": "user1@mail.com",\n      "can": { "edit": true, "delete": true, "publish": true }\n    }\n  ],\n  "meta": {\n    "current_page": 1,\n    "last_page": 10,\n    "per_page": 20,\n    "total": 200\n  },\n  "permissions": { "create": true, "export": true, "import": false },\n  "message": "Users fetched successfully"\n}\n'})}),"\n",(0,i.jsx)(s.h3,{id:"32-cursor-based-pagination-sederhana",children:"3.2 Cursor-based Pagination (Sederhana)"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-json",children:'{\n  "data": [\n    {\n      "id": 101,\n      "name": "Jane Smith",\n      "email": "user101@mail.com",\n      "can": { "edit": true, "delete": false, "publish": true }\n    }\n  ],\n  "meta": {\n    "last_id": 110,\n    "has_more": true\n  },\n  "permissions": { "create": true, "export": true, "import": false },\n  "message": "Users fetched successfully"\n}\n'})}),"\n",(0,i.jsxs)(s.blockquote,{children:["\n",(0,i.jsxs)(s.p,{children:["Meta cursor cukup sederhana: ",(0,i.jsx)(s.code,{children:"last_id"})," + ",(0,i.jsx)(s.code,{children:"has_more"}),".",(0,i.jsx)(s.br,{}),"\n","Frontend tinggal pakai ",(0,i.jsx)(s.code,{children:"meta.last_id"})," untuk request berikutnya."]}),"\n"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h2,{id:"4\uFE0F\u20E3-filter-handling",children:"4\uFE0F\u20E3 Filter Handling"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Simple filters"}),": ",(0,i.jsx)(s.code,{children:"role"}),", ",(0,i.jsx)(s.code,{children:"status"}),", ",(0,i.jsx)(s.code,{children:"created_after"})," \u2192 query builder ",(0,i.jsx)(s.code,{children:"where"})]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Range filters"}),": ",(0,i.jsx)(s.code,{children:"_min"})," / ",(0,i.jsx)(s.code,{children:"_max"})," suffix, misal ",(0,i.jsx)(s.code,{children:"age_min"}),", ",(0,i.jsx)(s.code,{children:"age_max"})]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Full-text / advanced search"}),": ",(0,i.jsx)(s.code,{children:"search"})," param, bisa parse keyword & operator ala Google (",(0,i.jsx)(s.code,{children:"date:2025-01-01 -site:example.com"}),")"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Hybrid"}),": structured filter + search string"]}),"\n"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h2,{id:"5\uFE0F\u20E3-permissions",children:"5\uFE0F\u20E3 Permissions"}),"\n",(0,i.jsx)(s.h3,{id:"51-global-permissions-halaman--tombol-umum",children:"5.1 Global permissions (halaman / tombol umum)"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-json",children:'"permissions": {\n  "create": true,\n  "export": true,\n  "import": false\n}\n'})}),"\n",(0,i.jsx)(s.h3,{id:"52-per-item-permissions-aksi-individual",children:"5.2 Per-item permissions (aksi individual)"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-json",children:'"data": [\n  {\n    "id": 1,\n    "name": "John Doe",\n    "email": "user1@mail.com",\n    "can": { "edit": true, "delete": true, "publish": true }\n  }\n]\n'})}),"\n",(0,i.jsxs)(s.blockquote,{children:["\n",(0,i.jsx)(s.p,{children:"Gunakan untuk menentukan tampilan tombol per item di frontend."}),"\n"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h2,{id:"6\uFE0F\u20E3-backend-laravel-example-controller",children:"6\uFE0F\u20E3 Backend Laravel Example (Controller)"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-php",children:"$query = User::query();\n$limit = $request->get('limit', 20);\n\n// Apply filters\nif ($request->filled('role')) $query->where('role', $request->role);\nif ($request->filled('status')) $query->where('status', $request->status);\nif ($request->filled('created_after')) $query->where('created_at', '>=', $request->created_after);\nif ($request->filled('search')) {\n    $search = $request->search;\n    $query->where(function($q) use ($search) {\n        $q->where('name', 'like', \"%$search%\")\n          ->orWhere('email', 'like', \"%$search%\");\n    });\n}\n\nif ($request->filled('last_id')) {\n    // Cursor-based pagination\n    $users = $query->where('id', '>', $request->last_id)\n                   ->orderBy('id', 'asc')\n                   ->limit($limit)\n                   ->get();\n\n    $lastUser = $users->last();\n    $meta = [\n        'last_id' => $lastUser?->id,\n        'has_more' => $users->count() === $limit\n    ];\n\n    return UserResource::collection($users)\n        ->additional([\n            'meta' => $meta,\n            'permissions' => [\n                'create' => auth()->user()->can('create', User::class),\n                'export' => auth()->user()->can('export', User::class),\n                'import' => auth()->user()->can('import', User::class),\n            ],\n            'message' => 'Users fetched successfully'\n        ]);\n} else {\n    // Offset pagination\n    $users = $query->paginate($limit);\n\n    return UserResource::collection($users)\n        ->additional([\n            'permissions' => [\n                'create' => auth()->user()->can('create', User::class),\n                'export' => auth()->user()->can('export', User::class),\n                'import' => auth()->user()->can('import', User::class),\n            ],\n            'message' => 'Users fetched successfully'\n        ]);\n}\n"})}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h2,{id:"best-practices-ringkas",children:"Best Practices Ringkas"}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Dual-mode pagination"})," \u2192 offset + cursor"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Meta sederhana"})," \u2192 ",(0,i.jsx)(s.code,{children:"last_id"})," + ",(0,i.jsx)(s.code,{children:"has_more"})," untuk cursor, ",(0,i.jsx)(s.code,{children:"current_page/total/last_page"})," untuk offset"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Filter fleksibel"})," \u2192 structured + optional search string"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Permissions global & per-item"})," \u2192 untuk UI kontrol tombol"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsxs)(s.strong,{children:["ResponseEntity / ",(0,i.jsx)(s.code,{children:"Either<Failure, Entity>"})]})," \u2192 di repository/usecase Flutter"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Default limit"})," \u2192 jangan terlalu besar, misal 20-50 per request"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Cursor deterministik"})," \u2192 gunakan kolom unik & terurut (",(0,i.jsx)(s.code,{children:"id"})," atau timestamp + id)"]}),"\n"]}),"\n",(0,i.jsxs)(s.p,{children:["Kalau mau, saya bisa buatkan versi ",(0,i.jsx)(s.strong,{children:"diagram flow BLoC \u2192 UseCase \u2192 Repository \u2192 API Laravel"})," yang langsung plug & play untuk starter kit Flutter-mu, lengkap dengan:"]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Offset / cursor pagination"}),"\n",(0,i.jsx)(s.li,{children:"Filter fleksibel + search"}),"\n",(0,i.jsxs)(s.li,{children:["Meta sederhana (",(0,i.jsx)(s.code,{children:"last_id"})," + ",(0,i.jsx)(s.code,{children:"has_more"}),")"]}),"\n",(0,i.jsx)(s.li,{children:"Permissions global & per-item"}),"\n"]})]})}function h(e={}){let{wrapper:s}={...(0,t.a)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(o,{...e})}):o(e)}},50065:function(e,s,n){n.d(s,{Z:function(){return a},a:function(){return l}});var r=n(67294);let i={},t=r.createContext(i);function l(e){let s=r.useContext(t);return r.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),r.createElement(t.Provider,{value:s},e.children)}}}]);