"use strict";(self.webpackChunkio_github_lyrihkaesa=self.webpackChunkio_github_lyrihkaesa||[]).push([["2545"],{43998:function(e,a,s){s.r(a),s.d(a,{default:()=>p,frontMatter:()=>d,metadata:()=>n,assets:()=>o,toc:()=>t,contentTitle:()=>i});var n=JSON.parse('{"id":"dbms/postgresql","title":"PostgreSQL","description":"Ubah Password","source":"@site/articles/learning/12-dbms/02-postgresql.md","sourceDirName":"12-dbms","slug":"/dbms/postgresql","permalink":"/learning/dbms/postgresql","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":2,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Database Cloud Provider","permalink":"/learning/dbms/database-cloud-provider"},"next":{"title":"Networking","permalink":"/learning/category/networking"}}'),r=s("85893"),l=s("50065");let d={},i="PostgreSQL",o={},t=[{value:"Ubah Password",id:"ubah-password",level:2},{value:"Docker Bash PostgreSQL",id:"docker-bash-postgresql",level:2},{value:"CasaOS Default",id:"casaos-default",level:3},{value:"Menampilkan Daftar Database",id:"menampilkan-daftar-database",level:2},{value:"Keluar dari username sekarang",id:"keluar-dari-username-sekarang",level:2},{value:"Backup Database",id:"backup-database",level:2},{value:"Restore Database",id:"restore-database",level:2},{value:"\uD83D\uDC18 Instalasi PostgreSQL Client 15 di Ubuntu 24.04 dengan <code>signed-by</code> GPG Key (Tanpa <code>apt-key</code>)",id:"-instalasi-postgresql-client-15-di-ubuntu-2404-dengan-signed-by-gpg-key-tanpa-apt-key",level:2},{value:"\uD83D\uDD27 Langkah Instalasi PostgreSQL Client 15",id:"-langkah-instalasi-postgresql-client-15",level:3},{value:"1. Tambahkan GPG Key PostgreSQL ke Format Modern",id:"1-tambahkan-gpg-key-postgresql-ke-format-modern",level:4},{value:"2. Tambahkan Repository PostgreSQL dengan <code>signed-by</code>",id:"2-tambahkan-repository-postgresql-dengan-signed-by",level:4},{value:"3. Update dan Install PostgreSQL Client",id:"3-update-dan-install-postgresql-client",level:4},{value:"4. Verifikasi Versi",id:"4-verifikasi-versi",level:4},{value:"\uD83D\uDD0C Cara Koneksi ke PostgreSQL Server",id:"-cara-koneksi-ke-postgresql-server",level:2},{value:"1. Koneksi Biasa (Password Prompt)",id:"1-koneksi-biasa-password-prompt",level:3},{value:"2. Koneksi Tanpa Password (Menggunakan <code>.pgpass</code>)",id:"2-koneksi-tanpa-password-menggunakan-pgpass",level:3},{value:"3. Koneksi via SSH Tunnel (Mirip GUI client seperti TablePlus/DBeaver)",id:"3-koneksi-via-ssh-tunnel-mirip-gui-client-seperti-tableplusdbeaver",level:3},{value:"A. SSH Tunnel Manual",id:"a-ssh-tunnel-manual",level:4},{value:"B. SSH Tunnel Satu Baris (Tanpa Interaktif)",id:"b-ssh-tunnel-satu-baris-tanpa-interaktif",level:4},{value:"\uD83E\uDDE0 Tips Tambahan",id:"-tips-tambahan",level:2},{value:"\u2705 Penutup",id:"-penutup",level:2}];function c(e){let a={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.header,{children:(0,r.jsx)(a.h1,{id:"postgresql",children:"PostgreSQL"})}),"\n",(0,r.jsx)(a.h2,{id:"ubah-password",children:"Ubah Password"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-sql",children:"ALTER USER casaos WITH PASSWORD 'new-password';\n"})}),"\n",(0,r.jsx)(a.h2,{id:"docker-bash-postgresql",children:"Docker Bash PostgreSQL"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-bash",children:"sudo docker exec -it postgresql bash\n"})}),"\n",(0,r.jsxs)(a.ul,{children:["\n",(0,r.jsxs)(a.li,{children:["Langsung ke container username ",(0,r.jsx)(a.code,{children:"postgres"})," dan directory ",(0,r.jsx)(a.code,{children:"~/data"})]}),"\n"]}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-bash",children:'sudo docker exec -it --user postgres postgresql bash -c "cd ~/data && exec bash"\n'})}),"\n",(0,r.jsx)(a.h3,{id:"casaos-default",children:"CasaOS Default"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-bash",children:"psql --username=casaos\n"})}),"\n",(0,r.jsx)(a.h2,{id:"menampilkan-daftar-database",children:"Menampilkan Daftar Database"}),"\n",(0,r.jsxs)(a.ul,{children:["\n",(0,r.jsx)(a.li,{children:"Lengkap"}),"\n"]}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-bash",children:"\\list\n"})}),"\n",(0,r.jsxs)(a.ul,{children:["\n",(0,r.jsx)(a.li,{children:"Singkatan:"}),"\n"]}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-bash",children:"\\l\n"})}),"\n",(0,r.jsx)(a.h2,{id:"keluar-dari-username-sekarang",children:"Keluar dari username sekarang"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-bash",children:"\\q\n"})}),"\n",(0,r.jsx)(a.h2,{id:"backup-database",children:"Backup Database"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-bash",children:"pg_dump --host=127.0.0.1 --port=5432 --dbname=pondokmbodo --username=pondokmbodo --verbose --format=plain --file=pondokmbodo_backup.sql --password\n"})}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-bash",children:"pg_dump --host=90.90.90.90 --port=5432 --dbname=pondokmbodo --username=pondokmbodo --verbose --format=plain --file=pondokmbodo_backup.sql --password\n"})}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-bash",children:"pg_dump -h 90.90.90.90 -U pondokmbodo -d pondokmbodo -F c -b -v -f mydatabase.backup\n"})}),"\n",(0,r.jsx)(a.h2,{id:"restore-database",children:"Restore Database"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-bash",children:"psql --username=casaos\n"})}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-sql",children:"DROP DATABASE IF EXISTS pondokmbodo_staging;\n"})}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-sql",children:"CREATE DATABASE pondokmbodo_staging OWNER pondokmbodo;\n"})}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-bash",children:"psql --host=127.0.0.1 --port=5432 --dbname=pondokmbodo_staging --username=pondokmbodo --file=pondokmbodo_backup.sql --password\n"})}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-bash",children:"psql --host=90.90.90.90 --port=5432 --dbname=pondokmbodo_restore --username=pondokmbodo --file=pondokmbodo_backup.sql --password\n"})}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-bash",children:"pg_restore -h 90.90.90.90 -U pondokmbodo -d pondokmbodo_restore -v mydatabase.backup\n"})}),"\n",(0,r.jsxs)(a.h2,{id:"-instalasi-postgresql-client-15-di-ubuntu-2404-dengan-signed-by-gpg-key-tanpa-apt-key",children:["\uD83D\uDC18 Instalasi PostgreSQL Client 15 di Ubuntu 24.04 dengan ",(0,r.jsx)(a.code,{children:"signed-by"})," GPG Key (Tanpa ",(0,r.jsx)(a.code,{children:"apt-key"}),")"]}),"\n",(0,r.jsxs)(a.p,{children:["Instalasi PostgreSQL client sering kali menghasilkan peringatan deprecated karena penggunaan ",(0,r.jsx)(a.code,{children:"apt-key"}),". Berikut adalah cara ",(0,r.jsx)(a.strong,{children:"modern, aman, dan bersih"})," untuk menginstal PostgreSQL client versi 15 di Ubuntu 24.04 (Noble Numbat)."]}),"\n",(0,r.jsx)(a.hr,{}),"\n",(0,r.jsx)(a.h3,{id:"-langkah-instalasi-postgresql-client-15",children:"\uD83D\uDD27 Langkah Instalasi PostgreSQL Client 15"}),"\n",(0,r.jsx)(a.h4,{id:"1-tambahkan-gpg-key-postgresql-ke-format-modern",children:"1. Tambahkan GPG Key PostgreSQL ke Format Modern"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-bash",children:"curl https://www.postgresql.org/media/keys/ACCC4CF8.asc | \\\ngpg --dearmor | \\\nsudo tee /usr/share/keyrings/postgresql.gpg > /dev/null\n"})}),"\n",(0,r.jsxs)(a.h4,{id:"2-tambahkan-repository-postgresql-dengan-signed-by",children:["2. Tambahkan Repository PostgreSQL dengan ",(0,r.jsx)(a.code,{children:"signed-by"})]}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-bash",children:'echo "deb [signed-by=/usr/share/keyrings/postgresql.gpg] http://apt.postgresql.org/pub/repos/apt $(lsb_release -cs)-pgdg main" | \\\nsudo tee /etc/apt/sources.list.d/pgdg.list\n'})}),"\n",(0,r.jsx)(a.h4,{id:"3-update-dan-install-postgresql-client",children:"3. Update dan Install PostgreSQL Client"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-bash",children:"sudo apt update\nsudo apt install postgresql-client-15\n"})}),"\n",(0,r.jsx)(a.h4,{id:"4-verifikasi-versi",children:"4. Verifikasi Versi"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-bash",children:"psql --version\n# Output: psql (PostgreSQL) 15.13\n"})}),"\n",(0,r.jsx)(a.hr,{}),"\n",(0,r.jsx)(a.h2,{id:"-cara-koneksi-ke-postgresql-server",children:"\uD83D\uDD0C Cara Koneksi ke PostgreSQL Server"}),"\n",(0,r.jsx)(a.h3,{id:"1-koneksi-biasa-password-prompt",children:"1. Koneksi Biasa (Password Prompt)"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-bash",children:"psql -h 127.0.0.1 -p 5432 -U postgres -d namadb\n"})}),"\n",(0,r.jsx)(a.p,{children:"Akan muncul prompt password:"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{children:"Password for user postgres:\n"})}),"\n",(0,r.jsx)(a.hr,{}),"\n",(0,r.jsxs)(a.h3,{id:"2-koneksi-tanpa-password-menggunakan-pgpass",children:["2. Koneksi Tanpa Password (Menggunakan ",(0,r.jsx)(a.code,{children:".pgpass"}),")"]}),"\n",(0,r.jsxs)(a.p,{children:["Buat file ",(0,r.jsx)(a.code,{children:"~/.pgpass"})," dan isi dengan format:"]}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{children:"hostname:port:database:username:password\n"})}),"\n",(0,r.jsx)(a.p,{children:"Contoh:"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{children:"127.0.0.1:5432:namadb:postgres:supersecret\n"})}),"\n",(0,r.jsx)(a.p,{children:"Lalu ubah permission:"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-bash",children:"chmod 600 ~/.pgpass\n"})}),"\n",(0,r.jsx)(a.p,{children:"Sekarang kamu bisa konek tanpa password prompt:"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-bash",children:"psql -h 127.0.0.1 -p 5432 -U postgres -d namadb\n"})}),"\n",(0,r.jsx)(a.hr,{}),"\n",(0,r.jsx)(a.h3,{id:"3-koneksi-via-ssh-tunnel-mirip-gui-client-seperti-tableplusdbeaver",children:"3. Koneksi via SSH Tunnel (Mirip GUI client seperti TablePlus/DBeaver)"}),"\n",(0,r.jsx)(a.h4,{id:"a-ssh-tunnel-manual",children:"A. SSH Tunnel Manual"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-bash",children:"ssh -L 5433:localhost:5432 user@remotehost\n"})}),"\n",(0,r.jsx)(a.p,{children:"Artinya:"}),"\n",(0,r.jsxs)(a.ul,{children:["\n",(0,r.jsxs)(a.li,{children:["Port lokal ",(0,r.jsx)(a.code,{children:"5433"})," akan diteruskan ke ",(0,r.jsx)(a.code,{children:"localhost:5432"})," di server tujuan."]}),"\n"]}),"\n",(0,r.jsx)(a.p,{children:"Kemudian dari terminal lain:"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-bash",children:"psql -h 127.0.0.1 -p 5433 -U postgres -d namadb\n"})}),"\n",(0,r.jsx)(a.h4,{id:"b-ssh-tunnel-satu-baris-tanpa-interaktif",children:"B. SSH Tunnel Satu Baris (Tanpa Interaktif)"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-bash",children:"ssh -fN -L 5433:localhost:5432 user@remotehost\n"})}),"\n",(0,r.jsx)(a.hr,{}),"\n",(0,r.jsx)(a.h2,{id:"-tips-tambahan",children:"\uD83E\uDDE0 Tips Tambahan"}),"\n",(0,r.jsxs)(a.ul,{children:["\n",(0,r.jsx)(a.li,{children:"Kamu bisa export SQL dari remote PostgreSQL via:"}),"\n"]}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-bash",children:"pg_dump -h host -U user -d namadb > backup.sql\n"})}),"\n",(0,r.jsxs)(a.ul,{children:["\n",(0,r.jsx)(a.li,{children:"Restore bisa dilakukan via:"}),"\n"]}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-bash",children:"psql -h host -U user -d namadb < backup.sql\n"})}),"\n",(0,r.jsxs)(a.ul,{children:["\n",(0,r.jsxs)(a.li,{children:["Jika kamu berada di dalam container, kamu cukup install ",(0,r.jsx)(a.code,{children:"postgresql-client-15"})," di host lalu koneksi ke container dengan IP atau network alias Docker."]}),"\n"]}),"\n",(0,r.jsx)(a.hr,{}),"\n",(0,r.jsx)(a.h2,{id:"-penutup",children:"\u2705 Penutup"}),"\n",(0,r.jsxs)(a.p,{children:["Dengan pendekatan ",(0,r.jsx)(a.code,{children:"signed-by"}),", kamu tidak hanya menghindari warning ",(0,r.jsx)(a.code,{children:"trusted.gpg"}),", tapi juga mengikuti standar keamanan yang direkomendasikan Debian/Ubuntu. Ditambah lagi, berbagai metode koneksi di atas membuat client CLI PostgreSQL menjadi fleksibel bahkan untuk sistem otomatisasi dan scripting."]})]})}function p(e={}){let{wrapper:a}={...(0,l.a)(),...e.components};return a?(0,r.jsx)(a,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},50065:function(e,a,s){s.d(a,{Z:function(){return i},a:function(){return d}});var n=s(67294);let r={},l=n.createContext(r);function d(e){let a=n.useContext(l);return n.useMemo(function(){return"function"==typeof e?e(a):{...a,...e}},[a,e])}function i(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:d(e.components),n.createElement(l.Provider,{value:a},e.children)}}}]);