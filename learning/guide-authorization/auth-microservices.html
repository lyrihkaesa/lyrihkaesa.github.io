<!doctype html><html lang=id dir=ltr class="docs-wrapper plugin-docs plugin-id-learning docs-version-current docs-doc-page docs-doc-id-guide-authorization/auth-microservices" data-has-hydrated=false><meta charset=UTF-8><meta name=generator content="Docusaurus v3.7.0"><title data-rh=true>Otorisasi dalam Microservices | Kaesa Lyrih</title><meta data-rh=true name=viewport content="width=device-width, initial-scale=1.0"><meta data-rh=true name=twitter:card content=summary_large_image><meta data-rh=true property=og:image content=https://kaesa.charapon.my.id/img/ksa-logo-gradient-blue.png><meta data-rh=true name=twitter:image content=https://kaesa.charapon.my.id/img/ksa-logo-gradient-blue.png><meta data-rh=true property=og:url content=https://kaesa.charapon.my.id/learning/guide-authorization/auth-microservices><meta data-rh=true property=og:locale content=id><meta data-rh=true name=docusaurus_locale content=id><meta data-rh=true name=docsearch:language content=id><meta data-rh=true name=docusaurus_version content=current><meta data-rh=true name=docusaurus_tag content=docs-learning-current><meta data-rh=true name=docsearch:version content=current><meta data-rh=true name=docsearch:docusaurus_tag content=docs-learning-current><meta data-rh=true property=og:title content="Otorisasi dalam Microservices | Kaesa Lyrih"><meta data-rh=true name=description content="Saat Anda berpindah dari monolit ke arsitektur berbasis layanan (service-oriented architecture), Anda perlu mendesain otorisasi Anda dengan tepat. Anda harus berbagi data otorisasi antar layanan, dan ada banyak cara untuk melakukannya. Setiap keputusan desain dan arsitektur memiliki trade-off yang perlu Anda pahami. Di panduan ini, kami akan menunjukkan setiap pilihan tersebut beserta trade-off-nya, serta menyediakan heuristik yang dapat membantu Anda membuat keputusan tentang arsitektur layanan Anda."><meta data-rh=true property=og:description content="Saat Anda berpindah dari monolit ke arsitektur berbasis layanan (service-oriented architecture), Anda perlu mendesain otorisasi Anda dengan tepat. Anda harus berbagi data otorisasi antar layanan, dan ada banyak cara untuk melakukannya. Setiap keputusan desain dan arsitektur memiliki trade-off yang perlu Anda pahami. Di panduan ini, kami akan menunjukkan setiap pilihan tersebut beserta trade-off-nya, serta menyediakan heuristik yang dapat membantu Anda membuat keputusan tentang arsitektur layanan Anda."><link data-rh=true rel=icon href=/img/favicon.ico><link data-rh=true rel=canonical href=https://kaesa.charapon.my.id/learning/guide-authorization/auth-microservices><link data-rh=true rel=alternate href=https://kaesa.charapon.my.id/learning/guide-authorization/auth-microservices hreflang=id><link data-rh=true rel=alternate href=https://kaesa.charapon.my.id/learning/guide-authorization/auth-microservices hreflang=x-default><link rel=alternate type=application/rss+xml href=/blog/rss.xml title="Kaesa Lyrih RSS Feed"><link rel=alternate type=application/atom+xml href=/blog/atom.xml title="Kaesa Lyrih Atom Feed"><link rel=stylesheet href=/assets/css/styles.3ffff460.css><script src=/assets/js/runtime~main.e07b4d83.js defer></script><script src=/assets/js/main.2998cd5b.js defer></script><body class=navigation-with-keyboard><script>!function(){var t,e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t=null!==e?e:"light",document.documentElement.setAttribute("data-theme",t)}(),function(){try{for(var[t,e]of new URLSearchParams(window.location.search).entries())if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id=__docusaurus><div role=region aria-label="Lewati ke konten utama"><a class=skipToContent_fXgn href=#__docusaurus_skipToContent_fallback>Lewati ke konten utama</a></div><nav aria-label=Utama class="navbar navbar--fixed-top"><div class=navbar__inner><div class=navbar__items><button aria-label="Alihkan bilah sisi" aria-expanded=false class="navbar__toggle clean-btn" type=button><svg width=30 height=30 viewBox="0 0 30 30" aria-hidden=true><path stroke=currentColor stroke-linecap=round stroke-miterlimit=10 stroke-width=2 d="M4 7h22M4 15h22M4 23h22"/></svg></button><a class=navbar__brand href=/><div class=navbar__logo><img src=/img/ksa-logo-gradient-blue.png alt="Kaesa lyrih" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src=/img/ksa-logo-gradient-blue.png alt="Kaesa lyrih" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Kaesa</b></a><a aria-current=page class="navbar__item navbar__link navbar__link--active" href=/learning>Learning</a><a class="navbar__item navbar__link" href=/laravel>Laravel</a><a class="navbar__item navbar__link" href=/flutter>Flutter</a><a class="navbar__item navbar__link" href=/toram>Toram Online</a></div><div class="navbar__items navbar__items--right"><a href=https://discord.gg/z5GUceqyhB target=_blank rel="noopener noreferrer" class="navbar__item navbar__link header-discord-link" aria-label=Discord></a><a href=https://github.com/lyrihkaesa target=_blank rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type=button disabled title="Ubah antara modus gelap dan modus terang (saat ini modus terang)" aria-label="Ubah antara modus gelap dan modus terang (saat ini modus terang)" aria-live=polite aria-pressed=false><svg viewBox="0 0 24 24" width=24 height=24 class=lightToggleIcon_pyhR><path fill=currentColor d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 class=darkToggleIcon_wfgR><path fill=currentColor d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"/></svg></button></div><div class=navbarSearchContainer_Bca1><div class="navbar__search searchBarContainer_NW3z" dir=ltr><input placeholder=Search aria-label=Search class="navbar__search-input searchInput_YFbd" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role=presentation class=navbar-sidebar__backdrop></div></nav><div id=__docusaurus_skipToContent_fallback class="main-wrapper mainWrapper_z2l0"><div class=docsWrapper_hBAB><button aria-label="Gulir kembali ke atas" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type=button></button><div class=docRoot_UBD9><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class=sidebarViewport_aRkj><div class=sidebar_njMd><nav aria-label="Bilah sisi dokumentasi" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/learning>📔 Catatan Belajar Kaesa</a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/learning/category/windows>Windows</a><button aria-label="Perluas kategori bilah sisi 'Windows'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/learning/category/linux>Linux</a><button aria-label="Perluas kategori bilah sisi 'Linux'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/learning/category/figma-uiux>Figma UI/UX</a><button aria-label="Perluas kategori bilah sisi 'Figma UI/UX'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/learning/category/nextjs>NextJS</a><button aria-label="Perluas kategori bilah sisi 'NextJS'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/learning/category/docker>Docker</a><button aria-label="Perluas kategori bilah sisi 'Docker'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/learning/category/git>Git</a><button aria-label="Perluas kategori bilah sisi 'Git'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/learning/category/uml>UML</a><button aria-label="Perluas kategori bilah sisi 'UML'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/learning/category/dbms>DBMS</a><button aria-label="Perluas kategori bilah sisi 'DBMS'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/learning/category/networking>Networking</a><button aria-label="Perluas kategori bilah sisi 'Networking'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/learning/category/uat>UAT</a><button aria-label="Perluas kategori bilah sisi 'UAT'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/learning/category/vscode>VSCode</a><button aria-label="Perluas kategori bilah sisi 'VSCode'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/learning/category/konsep-mvc>Konsep MVC</a><button aria-label="Perluas kategori bilah sisi 'Konsep MVC'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--active" href=/learning/category/vscode-1>VSCode</a><button aria-label="Ciutkan kategori bilah sisi 'VSCode'" aria-expanded=true type=button class="clean-btn menu__caret"></button></div><ul style=display:block;overflow:visible;height:auto class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/learning/guide-authorization/awalan>Awalan</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/learning/guide-authorization/intro>Pengantar Authorization Academy</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/learning/guide-authorization/dua>Apa itu Otorisasi?</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/learning/guide-authorization/rbac>Role-Based Access Control (RBAC)</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/learning/guide-authorization/rabac>Kontrol Akses Berdasarkan Hubungan (ReBAC)</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/learning/guide-authorization/authorization-enforcement>Penegakan Otorisasi</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current=page tabindex=0 href=/learning/guide-authorization/auth-microservices>Otorisasi dalam Microservices</a></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/learning/category/project-manager-pemula>Project Manager Pemula</a><button aria-label="Perluas kategori bilah sisi 'Project Manager Pemula'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/learning/category/magang-socha-informatika>Magang Socha Informatika</a><button aria-label="Perluas kategori bilah sisi 'Magang Socha Informatika'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/learning/category/toefl>TOEFL</a><button aria-label="Perluas kategori bilah sisi 'TOEFL'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/learning/lainnya/ward-end-peppard>lainnya</a></div></ul></nav><button type=button title="Ciutkan bilah sisi" aria-label="Ciutkan bilah sisi" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width=20 height=20 aria-hidden=true class=collapseSidebarButtonIcon_kv0_><g fill=#7a7a7a><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"/><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"/></g></svg></button></div></div></aside><main class=docMainContainer_TBSr><div class="container padding-top--md padding-bottom--lg"><div class=row><div class="col docItemCol_VOVn"><div class=docItemContainer_Djhp><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Runut navigasi"><ul class=breadcrumbs itemscope itemtype=https://schema.org/BreadcrumbList><li class=breadcrumbs__item><a aria-label="Halaman utama" class=breadcrumbs__link href=/><svg viewBox="0 0 24 24" class=breadcrumbHomeIcon_YNFT><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill=currentColor /></svg></a><li itemscope itemprop=itemListElement itemtype=https://schema.org/ListItem class=breadcrumbs__item><a class=breadcrumbs__link itemprop=item href=/learning/category/vscode-1><span itemprop=name>VSCode</span></a><meta itemprop=position content=1><li itemscope itemprop=itemListElement itemtype=https://schema.org/ListItem class="breadcrumbs__item breadcrumbs__item--active"><span class=breadcrumbs__link itemprop=name>Otorisasi dalam Microservices</span><meta itemprop=position content=2></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type=button class="clean-btn tocCollapsibleButton_TO0P">Pada halaman ini</button></div><div class="theme-doc-markdown markdown"><header><h1>Otorisasi dalam Microservices</h1></header>
<p>Saat Anda berpindah dari monolit ke arsitektur berbasis layanan (service-oriented architecture), Anda perlu mendesain otorisasi Anda dengan tepat. Anda harus berbagi data otorisasi antar layanan, dan ada banyak cara untuk melakukannya. Setiap keputusan desain dan arsitektur memiliki trade-off yang perlu Anda pahami. Di panduan ini, kami akan menunjukkan setiap pilihan tersebut beserta trade-off-nya, serta menyediakan heuristik yang dapat membantu Anda membuat keputusan tentang arsitektur layanan Anda.</p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=1-bagaimana-microservices-membuat-otorisasi-menjadi-rumit>1. Bagaimana Microservices Membuat Otorisasi Menjadi Rumit<a href=#1-bagaimana-microservices-membuat-otorisasi-menjadi-rumit class=hash-link aria-label="Taut langsung ke 1. Bagaimana Microservices Membuat Otorisasi Menjadi Rumit" title="Taut langsung ke 1. Bagaimana Microservices Membuat Otorisasi Menjadi Rumit">​</a></h3>
<p>Pada bab-bab sebelumnya, kita telah membahas pembangunan otorisasi di dalam sebuah aplikasi di mana seluruh kode, logika, dan data hidup di dalam aplikasi yang sama.</p>
<p>Di sini, kita akan membahas tantangan membuat otorisasi bekerja di lingkungan terdistribusi di mana kode, logika, dan data mungkin berada di layanan yang berbeda. Pada bab ini:</p>
<ul>
<li><strong>Layanan</strong> adalah sebuah komputer — atau terkadang sekelompok banyak komputer — yang diakses oleh pengguna atau layanan lain melalui jaringan.</li>
<li><strong>Aplikasi</strong> atau <strong>API</strong> yang terdiri dari banyak layanan kecil memiliki arsitektur "microservice".</li>
</ul>
<p>Bab ini membahas otorisasi dalam arsitektur microservices.</p>
<p>Meskipun istilah "microservices" biasanya mengacu pada penerapan dengan banyak layanan terpisah, tantangan membangun di lingkungan terdistribusi tetap sama, entah Anda memiliki dua layanan atau dua ratus. Di sini, kami menggunakan istilah “microservices” untuk menggambarkan sebuah aplikasi yang terdiri dari dua layanan atau lebih.</p>
<p>Terdapat perbedaan antara membangun otorisasi yang bekerja secara internal <em>di antara</em> aplikasi Anda dengan menggunakan protokol otorisasi terfederasi seperti OAuth untuk integrasi dengan layanan pihak ketiga secara aman. Bab ini membahas yang pertama — kami tidak akan membahas otorisasi dengan pihak ketiga.</p>
<p>Ada banyak alasan untuk mengadopsi arsitektur dengan banyak layanan. Misalnya, Anda mungkin ingin membangun produk baru yang mengharuskan Anda menggunakan <em>technology stack</em> yang berbeda. Atau, Anda mungkin perlu memecah sebuah layanan monolitik menjadi layanan-layanan yang lebih kecil agar tim Anda dapat mengerjakan komponen-komponen secara terpisah.</p>
<p>Apapun alasannya, hasilnya adalah Anda akan memiliki sebuah aplikasi yang terdiri dari banyak basis kode yang berbeda, dan Anda perlu memastikan mereka menyajikan pengalaman otorisasi yang konsisten.</p>
<p>Persyaratan ini saling bertentangan! Pengembang menggunakan arsitektur microservices untuk memisahkan layanan sehingga tim dapat mengerjakannya secara terpisah, namun otorisasi mengikatnya bersama karena harus bekerja secara konsisten di setiap layanan.</p>
<p><img decoding=async loading=lazy src=https://cdn.prod.website-files.com/5f1483105c9a72fd0a3b662a/62450049006c00875d5974da_emCdsbure5d5hFAeJxW-7z9CZdjAeNo3odDu5g8g7HmpYnGOXMZhkhMwvMKAWM9_wKSdLSHoPKxXalL6LH_3qDH0vkwaepFKIv7r-a01HunedoNRx0rh3tIgfQdIzwqDGnnDgdvk.avif alt="Contoh Diagram Microservices" class=img_ev3q></p>
<p>Untuk melihat permasalahan ini secara nyata, pertimbangkan contoh RBAC (Role-Based Access Control). Dalam sebuah aplikasi dengan beberapa layanan, <strong>Pengguna</strong> tergabung dan memiliki salah satu dari beberapa peran di dalam sebuah <strong>Organisasi</strong>.</p>
<p>Minimal, setiap layanan harus sepakat mengenai peran-peran yang mungkin dimiliki seorang anggota di sebuah organisasi. Selain mengetahui peran-peran apa saja yang ada, setiap layanan juga harus mengetahui peran spesifik apa yang dimiliki oleh seorang pengguna.</p>
<p>Dalam monolit, Anda dapat melakukan query pada basis data lokal untuk mendapatkan peran pengguna. Dalam contoh kita, apa yang terjadi ketika Anda menulis kode untuk sebuah layanan yang tidak memiliki salinan basis data tersebut secara lokal? Apakah Anda mengirimkan seluruh data dalam sebuah token? Apakah layanan saling memanggil untuk mengambil data yang mereka butuhkan saat pengguna membuat permintaan, secara "just in time"? Setelah sebuah layanan memiliki input yang diperlukan untuk membuat keputusan otorisasi, bagaimana layanan tersebut menegakkan keputusan tersebut dan mengkomunikasikan hasilnya kepada pengguna?</p>
<p>Pertanyaan-pertanyaan ini semua adalah pertanyaan arsitektur yang signifikan, dan pendekatan terbaiknya tidak selalu jelas.</p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=2-contoh-kita-gitclub-jobs>2. Contoh Kita: GitClub Jobs<a href=#2-contoh-kita-gitclub-jobs class=hash-link aria-label="Taut langsung ke 2. Contoh Kita: GitClub Jobs" title="Taut langsung ke 2. Contoh Kita: GitClub Jobs">​</a></h3>
<p>Mari kita lihat trade-off yang berbeda ini dalam praktik. Kami sedang membangun layanan baru bernama <strong>GitClub Jobs</strong> untuk melengkapi produk GitClub yang sudah ada. Jika Anda baru saja tiba, GitClub adalah aplikasi hosting kode seperti GitHub atau GitLab. <strong>GitClub Jobs</strong> adalah cara bagi para pengembang untuk mendefinisikan dan mengotomatiskan tugas deployment dan kompilasi di dalam repository mereka. Pelanggan dapat menggunakan GitClub Jobs untuk menjalankan rangkaian pengujian (test suite) setiap kali ada commit baru atau mengotomatiskan pembuatan dan deployment layanan web mereka setiap kali merilis versi baru.</p>
<p>Kami mendesain layanan GitClub Jobs untuk pekerjaan yang sepenuhnya berbeda dari layanan web asli kami: menjalankan tugas komputasi arbitrer. Karena persyaratan yang berbeda, kami membangun GitClub Jobs sebagai layanan baru.</p>
<p><img decoding=async loading=lazy src=https://cdn.prod.website-files.com/5f1483105c9a72fd0a3b662a/6245031f2aca4618247b17d5_sn4e_b9wY6_ye7lQAenW__ZMUiOksfcTO2Dr8xFrEbW_ls2YOrs3nMQVv_k-D-wspkT2FwHl0xWR0N-MRx8wv3tBKPrqyRNoiz9tfowLdjVjgOVAjoxjRFcMYHeez0wlPf29qgeE.avif alt="Contoh GitClub Jobs" class=img_ev3q></p>
<p>Objek data dalam layanan baru ini adalah <strong>jobs</strong> dan <strong>runs</strong>. <strong>Jobs</strong> merupakan definisi dari tugas otomatis yang harus dijalankan, dan <strong>Runs</strong> merepresentasikan eksekusi individual dari sebuah objek <strong>Job</strong>. Sebagai contoh, seorang pengguna yang ingin menjalankan unit test aplikasi akan mendefinisikan sebuah job “test” yang mencakup instruksi yang diperlukan. Setiap kali pengguna memulai rangkaian pengujian, kita membuat objek <strong>Run</strong>. Objek tersebut menyimpan status keberhasilan dan keluaran lain, seperti log atau artefak.</p>
<p>Pengguna berinteraksi dengan GitClub Jobs melalui halaman baru di <code>gitclub.dev/$ORGANIZATION/$REPOSITORY/jobs</code>. Halaman ini menampilkan gambaran umum tentang jobs yang ada untuk sebuah repository dan memungkinkan pengguna melakukan beberapa tugas manajemen dasar, seperti “cancel job” atau “restart job.”</p>
<p>GitClub Jobs mencakup dua kasus otorisasi yang akan Anda lihat di microservices: otorisasi bersama (shared authorization) dan otorisasi spesifik layanan (service-specific authorization). Model otorisasi GitClub Jobs memiliki objek yang sama dengan aplikasi web GitClub, seperti pengguna, organisasi, dan repository. Kita perlu berbagi konsep-konsep ini antar layanan kita. Model tersebut juga mendefinisikan objek-objek khusus layanan—jobs dan runs—yang tidak perlu dipertimbangkan oleh aplikasi web.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=model-otorisasi-gitclub-jobs><strong>Model Otorisasi GitClub Jobs</strong><a href=#model-otorisasi-gitclub-jobs class=hash-link aria-label="Taut langsung ke model-otorisasi-gitclub-jobs" title="Taut langsung ke model-otorisasi-gitclub-jobs">​</a></h4>
<p><img decoding=async loading=lazy src=https://cdn.prod.website-files.com/5f1483105c9a72fd0a3b662a/6245035464c36d8e386768bc_TNZjwldMLqct6a2tY0aTxI0seQlILG6xNYmhQPWHQwwhiOrMe6pvjrwZunQWGIjXAb_UNmkdjiEa_Wi_4i-f9NI74YTTAjkBJKfUjub6Aw1GH5oMeqc0PrA5zN2D8Gv81n7NVmlr.avif alt="Model Otorisasi GitClub Jobs" class=img_ev3q></p>
<p>Jobs eksis dalam konteks repository individual — sebuah job tidak bisa ada tanpa sebuah repository. Hubungan ini memungkinkan kita memodelkan otorisasi untuk objek <strong>Jobs</strong> dengan menggunakan peran yang sama seperti yang digunakan untuk <strong>Repositories</strong>. Misalnya, seorang pengguna dengan peran “member” di sebuah <strong>Repository</strong> akan memiliki peran “member” yang sama di layanan jobs untuk seluruh objek <strong>Jobs</strong> terkait.</p>
<p>Pengguna memiliki hubungan dengan <strong>Jobs</strong> dan <strong>Runs</strong> melalui <strong>Organizations</strong> dan <strong>Repositories</strong>. Kita ingin menggunakan hubungan ini untuk menegakkan kebijakan berikut:</p>
<ul>
<li>Pengguna dengan peran “reader” pada sebuah repository dapat <strong>melihat</strong> semua runs dan jobs yang terkait dengan repository tersebut.</li>
<li>Pengguna dengan peran “maintainer” pada sebuah repository dapat <strong>membatalkan</strong> (cancel) dan <strong>mengulangi</strong> (restart) setiap run dari jobs yang terkait dengan repository tersebut.</li>
<li>Pengguna dapat <strong>membatalkan</strong> dan <strong>mengulangi</strong> runs untuk jobs yang mereka buat.</li>
</ul>
<p>Untuk menampilkan halaman gambaran umum sebuah job, kita membutuhkan akses ke banyak titik data. Setidaknya, kita perlu mengetahui:</p>
<ul>
<li>Pengguna mana yang membuat job.</li>
<li>Apakah pengguna memiliki peran di repository secara langsung, misalnya sebagai hasil undangan.</li>
<li>Organisasi apa yang dimiliki repository tersebut, dan apakah pengguna memiliki peran di organisasi tersebut.</li>
</ul>
<p>Data pertama tersebut tersedia di layanan jobs, namun bagaimana dengan data organisasi dan repository? Dalam monolit, seluruh data itu tersedia di satu tempat, tetapi sekarang data tersebut tersebar di antara dua layanan kita.</p>
<p>Untuk menegakkan kebijakan ini, kita harus menemukan cara agar kedua layanan dapat berbagi kebijakan dan data yang diperlukan untuk keputusan otorisasi.</p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=3-cara-berbagi-data-antar-layanan>3. Cara Berbagi Data Antar Layanan<a href=#3-cara-berbagi-data-antar-layanan class=hash-link aria-label="Taut langsung ke 3. Cara Berbagi Data Antar Layanan" title="Taut langsung ke 3. Cara Berbagi Data Antar Layanan">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=mendekentralisasi-atau-mempusatkan-model-otorisasi-anda>Mendekentralisasi atau Mempusatkan Model Otorisasi Anda<a href=#mendekentralisasi-atau-mempusatkan-model-otorisasi-anda class=hash-link aria-label="Taut langsung ke Mendekentralisasi atau Mempusatkan Model Otorisasi Anda" title="Taut langsung ke Mendekentralisasi atau Mempusatkan Model Otorisasi Anda">​</a></h4>
<p>Saat Anda memecah monolit menjadi beberapa layanan, Anda perlu menentukan apakah model otorisasi Anda harus dipusatkan atau dipisah ke masing-masing layanan. Keputusan ini akan memengaruhi cara Anda mengelola model otorisasi, serta proses rollout perubahan model tersebut ke seluruh layanan Anda.</p>
<p>Saat membuat keputusan ini, pertimbangkan juga kebutuhan tim Anda. Misalnya, apakah tim perlu dapat melakukan perubahan pada model otorisasi layanan mereka sendiri tanpa harus berkoordinasi dengan tim lain?</p>
<hr>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id=model-dekentralisasi><strong>Model Dekentralisasi</strong><a href=#model-dekentralisasi class=hash-link aria-label="Taut langsung ke model-dekentralisasi" title="Taut langsung ke model-dekentralisasi">​</a></h5>
<p>Salah satu cara untuk mendekentralisasi model otorisasi Anda adalah dengan menduplikasi logika otorisasi di setiap layanan. Jika Anda hanya memiliki beberapa layanan, pendekatan ini bisa menjadi awal yang tepat. Dalam skenario ini, setiap layanan memiliki salinan lengkap model otorisasi. Model tersebut mencakup elemen-elemen umum di semua layanan (seperti hubungan antara pengguna dan organisasi) serta elemen khusus layanan (seperti aturan yang menentukan siapa yang dapat membatalkan job). Pendekatan ini memungkinkan setiap layanan mengubah model otorisasi tanpa perlu masukan dari tim lain.</p>
<p><img decoding=async loading=lazy src=https://cdn.prod.website-files.com/5f1483105c9a72fd0a3b662a/62450415a8ab820a3a93a355_88g923yzU-HulX_3zzqy4z_-JIIxTYsrx8knL6AXFPBEqwOwnWznTdtGl8gqZuMB3_W4DKBWINQcebkmXnDclwnMHd7N6Pb_b48Vls_U-ekxnBI-IH8cJqvPUliGGwagc9WNaFG3.avif alt="Contoh model dekentralisasi" class=img_ev3q></p>
<p>Seiring dengan pertumbuhan kebijakan Anda, Anda akan perlu mengelola banyak salinan logika otorisasi yang sama di seluruh layanan. Penting untuk memastikan bahwa setiap salinan tersebut selalu diperbarui, sehingga setiap perubahan harus dirollout ke masing-masing layanan.</p>
<p>Jika seluruh basis kode layanan Anda menggunakan bahasa pemrograman yang sama, Anda bisa memisahkan logika otorisasi ke dalam sebuah pustaka (library) bersama. Setiap layanan kemudian bergantung pada pustaka bersama tersebut. Penggunaan kode bersama ini menghilangkan risiko sebuah layanan memiliki kesalahan pada kebijakannya sendiri. Meskipun pendekatan ini mengatasi risiko implementasi yang mulai menyimpang seiring waktu, Anda tetap perlu mengoordinasikan pembaruan di seluruh layanan.</p>
<hr>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id=model-pusat-centralizing-models><strong>Model Pusat (Centralizing Models)</strong><a href=#model-pusat-centralizing-models class=hash-link aria-label="Taut langsung ke model-pusat-centralizing-models" title="Taut langsung ke model-pusat-centralizing-models">​</a></h5>
<p>Sistem terdistribusi tidak selalu konsisten atau tersedia. Jika Anda mendistribusikan ke banyak layanan, hal ini dapat membuat pembaruan kebijakan di seluruh layanan rentan terhadap kesalahan. Pada titik ini, masuk akal untuk memusatkan definisi dan pengelolaan kebijakan otorisasi Anda.</p>
<p><img decoding=async loading=lazy src=https://cdn.prod.website-files.com/5f1483105c9a72fd0a3b662a/6245042fdfdab82c0faab3eb_ugE7LjSXS8Q-Cn5_2SDok8drsST-BZ0dsjWCXlzC7wOv6oB7WoCYlLZgiS1ZMu8J2VhFtfl0BraYamGs0DIx_zGg32sZpizyvPMfi98sRQ3rg_DduDAwmAoePDzGQZDLTSHugDZX.avif alt="Contoh model sentralisasi" class=img_ev3q></p>
<p>Model pusat memiliki trade-off. Dalam arsitektur yang sepenuhnya terdesentralisasi, setiap layanan bebas untuk memperkenalkan dan menguji perubahan pada kebijakan secara terpisah. Di dunia yang dipusatkan, Anda harus mengdeploy perubahan ke semua layanan sekaligus. Sulit untuk memprediksi kasus edge di setiap layanan sebelumnya. Penting untuk mempertimbangkan cara-cara menguji perilaku kebijakan sebelum melakukan deploy, seperti menggunakan data mock dan test fixture.</p>
<p>Salah satu opsi adalah membuat layanan khusus untuk menangani keputusan otorisasi untuk aplikasi Anda. Layanan Anda kemudian memanggil API pusat ini setiap kali ada pertanyaan otorisasi. Dengan mengekspos kebijakan otorisasi melalui jaringan, layanan aplikasi Anda dapat mendelegasikan pekerjaan tersebut ke satu tempat yang juga menyediakan pengelolaan kebijakan otorisasi secara sentral. Selain itu, layanan pusat memungkinkan Anda memperbarui kebijakan untuk seluruh klien sekaligus, sehingga tidak perlu mengoordinasikan perubahan ke masing-masing layanan.</p>
<hr>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=mempusatkan-data>Mempusatkan Data<a href=#mempusatkan-data class=hash-link aria-label="Taut langsung ke Mempusatkan Data" title="Taut langsung ke Mempusatkan Data">​</a></h4>
<p>Kebijakan hanyalah setengah dari persamaan otorisasi. Untuk menegakkan kebijakan tersebut, Anda juga memerlukan akses ke data yang relevan.</p>
<p>Pertanyaan kapan harus memusatkan kebijakan Anda lebih mudah dijawab dibandingkan dengan kapan harus memusatkan data. Hal ini karena ukuran dataset — kebijakan biasanya hanya beberapa ratus baris teks, sementara basis data bisa sangat besar — dan frekuensi pembaruan data yang jauh lebih tinggi.</p>
<p>Anda mungkin akan memperbarui kebijakan Anda secara jarang. Sebaliknya, pengguna dan layanan terus-menerus mengubah data aplikasi Anda. Selain itu, kebijakan Anda mungkin memerlukan akses ke banyak titik data yang berbeda untuk membuat keputusan otorisasi.</p>
<p>Untuk mendemonstrasikan, kita kembali ke contoh GitClub Jobs. Kita ingin menegakkan aturan berikut:</p>
<ul>
<li>Pengguna dengan peran “member” pada sebuah repository dapat melihat semua job untuk repository tersebut.</li>
<li>Pengguna dengan peran “admin” pada sebuah repository dapat membatalkan (cancel) job apa pun untuk repository tersebut.</li>
<li>Pengguna dapat membatalkan job yang mereka buat.</li>
</ul>
<p>Untuk menegakkan kebijakan ini, kita memerlukan akses ke data tentang pengguna, job, dan organisasi serta repository tempat mereka masing-masing berada. Itu banyak input yang berbeda! Data pengguna dapat disediakan dalam bentuk JSON Web Token, sedangkan data job tersedia secara lokal di layanan. Namun, bagaimana dengan data organisasi dan repository?</p>
<p>Dalam monolit, Anda dapat yakin bahwa semua data tersebut tersedia di satu tempat. Sayangnya, tidak ada jaminan seperti itu di dunia microservices. Skenario seperti ini umum terjadi ketika Anda memecah aplikasi yang sudah ada menjadi layanan-layanan yang berbeda, dan hal ini menyoroti tantangan mendasar dalam menyelesaikan otorisasi di aplikasi terdistribusi.</p>
<p>Ketika Anda menghadapi situasi ini, Anda memiliki dua opsi:</p>
<ol>
<li>Gunakan teknologi yang sudah ada untuk mendistribusikan data di dalam infrastruktur Anda.</li>
<li>Perkenalkan layanan otorisasi terpusat untuk mengumpulkan data di satu lokasi.</li>
</ol>
<hr>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=mendistribusikan-data-dengan-infrastruktur-yang-ada>Mendistribusikan Data dengan Infrastruktur yang Ada<a href=#mendistribusikan-data-dengan-infrastruktur-yang-ada class=hash-link aria-label="Taut langsung ke Mendistribusikan Data dengan Infrastruktur yang Ada" title="Taut langsung ke Mendistribusikan Data dengan Infrastruktur yang Ada">​</a></h4>
<p>Aturan emas kita adalah: bangunlah otorisasi di sekitar aplikasi Anda, bukan sebaliknya. Aturan ini berlaku baik untuk monolit maupun arsitektur microservices. Oleh karena itu, pertimbangkan infrastruktur atau opsi lain yang mungkin sudah tersedia untuk membagikan data antar microservices Anda.</p>
<p>Masalah ini tidak unik untuk otorisasi — masalah berbagi data dengan semua layanan muncul kapan pun diperlukan. Karena itu, mungkin saja Anda sudah memiliki infrastruktur yang dapat digunakan kembali untuk mendistribusikan data otorisasi Anda.</p>
<p>Berikut beberapa opsi:</p>
<hr>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id=komunikasi-antar-layanan-service-to-service-communication><strong>Komunikasi Antar-Layanan (Service-to-service communication)</strong><a href=#komunikasi-antar-layanan-service-to-service-communication class=hash-link aria-label="Taut langsung ke komunikasi-antar-layanan-service-to-service-communication" title="Taut langsung ke komunikasi-antar-layanan-service-to-service-communication">​</a></h5>
<p>Salah satu opsi adalah membuat layanan Anda bertindak seperti klien dan memanggil API layanan lain untuk mengambil data yang diperlukan secara just-in-time. Dengan cara ini, data yang digunakan untuk keputusan otorisasi akan selalu segar dan dapat diandalkan.</p>
<p><img decoding=async loading=lazy src=https://cdn.prod.website-files.com/5f1483105c9a72fd0a3b662a/624504b19a4c8a0f144e8064_PBQjvYOcXhtRUxP5DvJmkjvZHHS7oovzYmEZdawg-O8QqVFZEhP_5ZvQSDJkghyCoaIewDRVMcWpg7HAbROU6YG4Vblldv4d_Otb20uHVJ5V0EMYkTMNwzlUUex1ctSdFtlJRAGv.avif alt="Contoh komunikasi antar layanan" class=img_ev3q></p>
<p>Pendekatan naif ini bisa bekerja jika persyaratan performa rendah, namun dengan cepat akan menghasilkan performa yang buruk di bawah beban tinggi. Setiap permintaan yang memerlukan data dari banyak layanan akan menjadi lambat — satu permintaan klien dapat memicu beberapa permintaan lain, secara efektif menggandakan beban permintaan Anda.</p>
<p>Jika Anda memiliki metode yang sangat performa untuk mengambil data antar layanan — misalnya, menggunakan gRPC untuk komunikasi antar layanan — silakan gunakan itu!</p>
<hr>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id=authorization-tokens><strong>Authorization Tokens</strong><a href=#authorization-tokens class=hash-link aria-label="Taut langsung ke authorization-tokens" title="Taut langsung ke authorization-tokens">​</a></h5>
<p>Jika, seperti banyak di antara kita, organisasi Anda belum memiliki solusi basis data terdistribusi yang performa tinggi dan andal, ada opsi lain.</p>
<p>Jika hanya terdapat sedikit data yang perlu tersedia untuk setiap layanan guna otorisasi, Anda dapat mendesentralisasikannya dengan menyertakan seluruh data dalam setiap permintaan. Salah satu cara melakukannya adalah dengan menggunakan token otorisasi, seperti JSON Web Tokens (JWT), untuk menyebarkan data antar layanan secara aman.</p>
<p><img decoding=async loading=lazy src=https://cdn.prod.website-files.com/5f1483105c9a72fd0a3b662a/624504b12eb71a50e66930c5_SSpWj0Z6XUIOShEMzaSo2X6YE-kOvU2hApLaEct71SghDG1qtZCkITs6oJUOAzd9Ty5qDrxES6g8jGkecKzcQbfop_lg7H_XsrmwwAMjREeOISbH02wsR_Ul4ORhlrzhqVYzgeGZ.avif alt="Contoh Authorization Token" class=img_ev3q></p>
<p>Token otorisasi mengandalkan tanda tangan kriptografi untuk melindungi integritas isinya dari manipulasi. Tanda tangan kriptografi mencegah penyerang mengambil token milik satu pengguna dan mengubahnya untuk mewakili pengguna lain. Banyak aplikasi membatasi ruang lingkup token otorisasi hanya untuk menyerialisasikan identitas pengguna. Namun, hal itu tidak selalu diperlukan — Anda dapat menyertakan data RBAC lainnya agar dapat digunakan oleh layanan Anda.</p>
<p>Dalam contoh GitClub, Anda dapat menyerialisasikan seluruh peran organisasi yang dimiliki seorang pengguna ke dalam JWT bersama identitas pengguna. Pendekatan ini akan bekerja dengan baik untuk peran organisasi karena biasanya pengguna tidak memiliki banyak peran seperti itu. Namun, strategi ini tidak berguna untuk mengenkode peran repository karena ruang dalam JWT akan terbatas. Selain itu, jika Anda mengirimkan JWT melalui header HTTP, Anda akan menemui batasan ukuran header.</p>
<p>Satu kekhawatiran lain adalah data yang terkandung dalam token otorisasi dapat dengan cepat menjadi usang. Misalnya, dalam aplikasi di mana pengguna hanya mendapatkan token otorisasi baru secara jarang (misalnya, saat login), perubahan (seperti undangan ke repository baru) tidak akan segera terlihat. Sebaliknya, pengguna harus menyegarkan token otorisasi mereka agar perubahan tersebut muncul.</p>
<hr>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id=basis-data-bersama-shared-databases><strong>Basis Data Bersama (Shared Databases)</strong><a href=#basis-data-bersama-shared-databases class=hash-link aria-label="Taut langsung ke basis-data-bersama-shared-databases" title="Taut langsung ke basis-data-bersama-shared-databases">​</a></h5>
<p>Jika Anda memiliki lebih banyak data otorisasi daripada yang dapat dimasukkan ke dalam satu token, di mana sebaiknya data itu disimpan? Salah satu opsi adalah menggunakan basis data khusus yang digunakan bersama untuk data otorisasi.</p>
<p>Perusahaan biasanya mendesain microservices mereka agar memiliki penyimpanan data independen untuk memastikan keandalan atau isolasi keamanan. Itu adalah hal yang tepat jika layanan Anda tidak memiliki ketergantungan yang erat satu sama lain.</p>
<p>Namun, ketika mengimplementasikan otorisasi, Anda ingin data tersebut dapat dibagikan ke seluruh layanan Anda. Basis data bersama adalah solusi yang baik dalam situasi ini. Basis data menangani penyimpanan data dan membuatnya dapat diakses oleh banyak pembaca dengan performa tinggi. Jika tidak semua layanan perlu memanipulasi data otorisasi, Anda bahkan dapat menggunakan read replica untuk membagikan data antar layanan tanpa mengandalkan satu host pusat sebagai titik kegagalan.</p>
<p><img decoding=async loading=lazy src=https://cdn.prod.website-files.com/5f1483105c9a72fd0a3b662a/624504b1f60b3a3890b90901_zQdwpNTqSoFamppK3qWQf_CPHkmetA_MFkshYNwjFS8flkBq8_mB5ZmnmVykJ03Y60TmgJfmiYMDi2GHjKsCuCt47hgPPYKzNBr4dIPcE7jiCGxIWmQQukkHZpKhDGxPb5qx37I8.avif alt="Diagram Basis Data Bersama" class=img_ev3q></p>
<hr>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id=event-sourcing-dan-replikasi-data-selektif><strong>Event Sourcing dan Replikasi Data Selektif</strong><a href=#event-sourcing-dan-replikasi-data-selektif class=hash-link aria-label="Taut langsung ke event-sourcing-dan-replikasi-data-selektif" title="Taut langsung ke event-sourcing-dan-replikasi-data-selektif">​</a></h5>
<p>Jika Anda menjalankan banyak layanan, tidak selalu masuk akal untuk mereplikasi seluruh dataset otorisasi Anda ke setiap layanan. Setiap layanan kemungkinan hanya menggunakan sebagian kecil dari dataset tersebut, sehingga replikasi secara keseluruhan menjadi tidak efisien.</p>
<p>Dalam kasus ini, Anda dapat mengimplementasikan mekanisme event sourcing menggunakan platform seperti Kafka. Anda dapat menerbitkan perubahan pada resource ke dalam aliran event terdistribusi dan mengonsumsinya di layanan lain. Platform streaming event seperti Kafka umumnya memungkinkan konsumen untuk berlangganan hanya pada bagian tertentu dari aliran. Dengan begitu, layanan hanya akan berlangganan pada perubahan yang relevan dengan model otorisasi mereka dan dapat mempertahankan salinan data lokal secara independen.</p>
<p>Menggunakan aliran event pada dasarnya sama dengan replikasi basis data, kecuali bahwa Anda menggunakan aplikasi Anda untuk menerapkan penyaringan demi performa atau alasan lainnya. Hasil akhirnya sama — sebuah sumber data lokal yang dapat diquery layanan Anda untuk mendapatkan hasil otorisasi dengan cepat.</p>
<hr>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=authorization-as-a-service>Authorization-as-a-Service<a href=#authorization-as-a-service class=hash-link aria-label="Taut langsung ke Authorization-as-a-Service" title="Taut langsung ke Authorization-as-a-Service">​</a></h4>
<p>Jika Anda tidak memiliki mekanisme transfer data yang memadai, jangan membangun satu mekanisme khusus hanya untuk otorisasi.</p>
<p>Jika tidak ada opsi di atas yang cocok untuk tim Anda, opsi terbaik berikutnya adalah membangun layanan otorisasi terpusat. Memusatkan otorisasi juga masuk akal jika Anda berencana meningkatkan jumlah layanan di masa depan, karena setiap layanan baru hanya memerlukan biaya marginal kecil untuk mendukungnya.</p>
<p>Perbedaan utama antara pendekatan ini dengan menggunakan basis data bersama adalah bahwa Anda akan memusatkan kebijakan dan pengambilan keputusan dalam layanan baru ini, selain memusatkan data Anda.</p>
<p>Tantangan terbesar dalam mengembangkan layanan otorisasi terpusat adalah masalah data. Secara khusus, Anda harus memastikan data tersebut direplikasi secara andal atau dipusatkan dengan baik. Arsitektur Anda akan bergantung pada apakah Anda mendefinisikan layanan baru ini sebagai sumber kebenaran utama untuk seluruh isinya atau jika layanan tersebut menyimpan salinan data dari sumber lain.</p>
<hr>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id=menyimpan-data-ke-dalam-layanan><strong>Menyimpan Data ke dalam Layanan</strong><a href=#menyimpan-data-ke-dalam-layanan class=hash-link aria-label="Taut langsung ke menyimpan-data-ke-dalam-layanan" title="Taut langsung ke menyimpan-data-ke-dalam-layanan">​</a></h5>
<p>Dalam sistem terdistribusi, setiap layanan memiliki tanggung jawab dan ketergantungan masing-masing. Dalam contoh GitClub, layanan web bertanggung jawab mengelola pengguna, organisasi, repository, dan hubungan antar mereka. Layanan jobs menangani pembuatan, orkestrasi, dan eksekusi jobs dari repository. Sistem terdistribusi Anda juga akan memiliki hubungan khusus yang dimiliki oleh masing-masing layanan.</p>
<p>Agar otorisasi terpusat dapat bekerja, Anda harus mengirimkan salinan informasi tersebut dari semua layanan aplikasi Anda ke layanan otorisasi. Karena microservices biasanya memiliki datastore independen, Anda harus mengatur mekanisme replikasi untuk setiap datastore yang mengandung data yang relevan dengan kebijakan otorisasi Anda.</p>
<p>Ada banyak opsi untuk mekanisme replikasi data. Salah satunya adalah dengan mengekspos API di layanan otorisasi Anda, lalu memanggil API tersebut dari dalam kode model di layanan Anda setiap kali terjadi perubahan resource. Kunci agar mekanisme ini bekerja adalah memastikan bahwa semua kasus error ditangani dengan benar — misalnya, jika panggilan HTTP ke layanan otorisasi gagal, maka pembaruan lokal juga harus gagal, dan sebaliknya.</p>
<p>Banyak teknologi basis data menyediakan <em>operation log</em> yang menyerialisasikan setiap operasi pembuatan dan pembaruan record secara berurutan. Anda dapat mengonsumsi log operasi ini untuk memantau perubahan pada tipe resource yang penting, kemudian meneruskan perubahan tersebut ke layanan otorisasi. Gunakan pola ini di situasi di mana replikasi secara real-time sangat penting, misalnya, untuk mengisi indeks pencarian berdasarkan isi basis data relasional.</p>
<p>Kasus terburuk adalah ketidaksesuaian antara isi data lokal dan data di layanan otorisasi. Jika sebuah resource ada secara lokal tetapi tidak ada di layanan otorisasi terpusat, maka pengguna tidak akan memiliki izin yang benar untuk resource tersebut.</p>
<p>Seiring bertambahnya layanan, jumlah koneksi antar layanan juga akan meningkat. Mereplikasi data dan memastikan bahwa salinan lokal dan remote selalu sinkron dapat menjadi tidak andal. Anda dapat menghindari masalah ini sepenuhnya dengan mengandalkan layanan otorisasi terpusat sebagai sumber kebenaran utama untuk data tersebut.</p>
<p>Sayangnya, pendekatan ini dapat memerlukan reorganisasi besar pada layanan aplikasi Anda. Di mana sebelumnya aplikasi dapat mengandalkan basis data lokal untuk memfilter dan mengambil resource, sekarang mereka harus memanggil layanan otorisasi terpusat Anda. Pendekatan ini praktis, tetapi melanggar isolasi ketat antara microservices.</p>
<hr>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id=berapa-banyak-data-yang-harus-disimpan><strong>Berapa Banyak Data yang Harus Disimpan?</strong><a href=#berapa-banyak-data-yang-harus-disimpan class=hash-link aria-label="Taut langsung ke berapa-banyak-data-yang-harus-disimpan" title="Taut langsung ke berapa-banyak-data-yang-harus-disimpan">​</a></h5>
<p>Memilih bagian dari model mana yang harus dipindahkan ke datastore terpusat bergantung pada kebijakan Anda. Hampir setiap atribut bisa dianggap sebagai data otorisasi.</p>
<p>Dalam contoh GitClub Jobs, masuk akal untuk memusatkan penyimpanan data peran dan hubungan untuk organisasi dan repository. Layanan web dan jobs akan sama-sama menggunakan data tersebut.</p>
<p>Namun, bagaimana dengan atribut khusus layanan lainnya? Misalnya, kita mungkin menggunakan properti <em>author</em> dari objek <em>Job</em> untuk menerapkan aturan, seperti contoh sebelumnya di mana pengguna dapat membatalkan jobs yang mereka buat. Jika layanan jobs adalah satu-satunya layanan yang menggunakan hubungan ini untuk aturan otorisasinya, tampaknya mereplikasi data tersebut ke layanan terpusat terasa boros. Namun, itu tidak masalah! Data tersebut penting, dan biasanya ukurannya tidak menjadi bottleneck. Jika Anda ingin layanan otorisasi terpusat mengembalikan hasil otorisasi (ya/tidak), maka layanan tersebut harus memiliki akses ke seluruh data yang terlibat dalam keputusan tersebut. Bersikaplah dermawan saat mereplikasi data ke layanan otorisasi terpusat Anda. Dengan begitu, Anda dapat menulis kebijakan yang lebih komprehensif.</p>
<p>Melakukan hal ini juga memudahkan perluasan model di masa depan. Misalnya, bayangkan di masa depan Anda ingin membuat layanan baru bernama GitClub Artifacts yang mendistribusikan file hasil dari sebuah Job kepada pengguna. Anda dapat menggunakan hubungan <em>Job</em> baik dengan output Artifacts maupun dengan pengguna yang membuatnya untuk menerapkan kontrol akses yang sangat ketat.</p>
<hr>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=pre-built-options><strong>Pre-built Options</strong><a href=#pre-built-options class=hash-link aria-label="Taut langsung ke pre-built-options" title="Taut langsung ke pre-built-options">​</a></h4>
<p>Membangun layanan otorisasi terpusat adalah usaha besar. Perusahaan yang membangun layanan otorisasi sendiri — seperti Google, Slack, dan Airbnb — menemukan bahwa upaya ini memerlukan lebih dari satu tahun kerja oleh tim khusus.</p>
<p>Anda juga dapat menggunakan layanan otorisasi terpusat dari pihak ketiga. Opsi-opsi yang tersedia antara lain <a href=https://www.osohq.com/docs target=_blank rel="noopener noreferrer">Oso Cloud</a>, Ory Keto (solusi berbasis Google Zanzibar), dan Aserto (solusi berbasis Open Policy Agent). Kami telah menulis lebih detail tentang layanan-layanan ini dan lainnya dalam <a href=https://www.osohq.com/cloud/authorization-service target=_blank rel="noopener noreferrer">panduan otorisasi sebagai layanan</a>.</p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=4-ringkasan-aturan-umum-untuk-otorisasi-pada-microservices>4. Ringkasan: Aturan Umum untuk Otorisasi pada Microservices<a href=#4-ringkasan-aturan-umum-untuk-otorisasi-pada-microservices class=hash-link aria-label="Taut langsung ke 4. Ringkasan: Aturan Umum untuk Otorisasi pada Microservices" title="Taut langsung ke 4. Ringkasan: Aturan Umum untuk Otorisasi pada Microservices">​</a></h3>
<p>Apakah Anda baru mulai memecah monolit atau sudah sangat maju dalam perjalanan microservices Anda, Anda akan membutuhkan model otorisasi yang konsisten untuk memberikan pengalaman yang mulus kepada pengguna.</p>
<p>Hal terpenting adalah izin harus transparan bagi pengguna Anda. Pengguna tidak boleh bisa membedakan apakah mereka berinteraksi dengan monolit atau dengan kumpulan microservices yang berbeda. Untuk itu, pada akhirnya layanan Anda harus sepakat mengenai otorisasi.</p>
<p>Apapun rencana Anda, bangunlah otorisasi di sekitar aplikasi Anda, bukan sebaliknya. Artinya, jika Anda memiliki sedikit data peran untuk setiap pengguna, Anda mungkin cukup menyimpannya dalam sebuah JWT dan mengirimkannya ke setiap layanan. Jika Anda sudah memiliki komunikasi antar-layanan yang efektif di lingkungan terdistribusi Anda, Anda dapat menggunakan komunikasi tersebut untuk mengambil data otorisasi yang diperlukan langsung dari sumbernya. Jika Anda perlu menerapkan otorisasi yang lebih granular daripada yang bisa dicapai dengan JWT, pertimbangkan untuk memusatkan otorisasi dalam satu layanan.</p>
<p>Jika Anda memiliki banyak data otorisasi dan tidak ada infrastruktur yang tersedia untuk tugas tersebut, Anda harus membangun layanan otorisasi terpusat untuk menyimpan data tersebut. Tantangan terbesar dalam mengoperasikan layanan seperti itu adalah memastikan bahwa data yang dimilikinya selalu mencerminkan keadaan dunia yang up-to-date dan konsisten.</p>
<p>Jika Anda memilih untuk membangun layanan otorisasi terpusat, prioritas utama Anda adalah menjaga agar data tersebut sinkron dengan semua perubahan yang terjadi di layanan Anda. Untuk setiap resource baru yang dibuat oleh pengguna dan untuk setiap peran yang Anda tetapkan kepada pengguna, Anda harus memastikan bahwa perubahan tersebut direplikasi ke datastore otorisasi terpusat Anda. Jika tidak, hasil otorisasi bisa salah (false-negative) dan menghasilkan pengalaman yang menyebalkan bagi pengguna.</div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Halaman dokumentasi"><a class="pagination-nav__link pagination-nav__link--prev" href=/learning/guide-authorization/authorization-enforcement><div class=pagination-nav__sublabel>Sebelum</div><div class=pagination-nav__label>Penegakan Otorisasi</div></a><a class="pagination-nav__link pagination-nav__link--next" href=/learning/category/project-manager-pemula><div class=pagination-nav__sublabel>Berikut</div><div class=pagination-nav__label>Project Manager Pemula</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href=#1-bagaimana-microservices-membuat-otorisasi-menjadi-rumit class="table-of-contents__link toc-highlight">1. Bagaimana Microservices Membuat Otorisasi Menjadi Rumit</a><li><a href=#2-contoh-kita-gitclub-jobs class="table-of-contents__link toc-highlight">2. Contoh Kita: GitClub Jobs</a><li><a href=#3-cara-berbagi-data-antar-layanan class="table-of-contents__link toc-highlight">3. Cara Berbagi Data Antar Layanan</a><li><a href=#4-ringkasan-aturan-umum-untuk-otorisasi-pada-microservices class="table-of-contents__link toc-highlight">4. Ringkasan: Aturan Umum untuk Otorisasi pada Microservices</a></ul></div></div></div></div></main></div></div></div><footer class="bg-gray-100 dark:bg-slate-950/50"><div class="mx-auto max-w-7xl px-4 py-10"><div class="row footer__links"><div class="col footer__col"><div class=footer__title>Sosial Media</div><ul class="footer__items clean-list"><li class=footer__item><a href=https://www.facebook.com/lyrihkaesa.official target=_blank rel="noopener noreferrer" class=footer__link-item>Fanpage Kaesa Lyrih<svg width=13.5 height=13.5 aria-hidden=true viewBox="0 0 24 24" class=iconExternalLink_nPIU><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></svg></a><li class=footer__item><a href=https://twitter.com/lyrihkaesa target=_blank rel="noopener noreferrer" class=footer__link-item>Twitter<svg width=13.5 height=13.5 aria-hidden=true viewBox="0 0 24 24" class=iconExternalLink_nPIU><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></svg></a></ul></div><div class="col footer__col"><div class=footer__title>Komunitas</div><ul class="footer__items clean-list"><li class=footer__item><a href=https://www.facebook.com/groups/kaesatoramonline target=_blank rel="noopener noreferrer" class=footer__link-item>Facebook Kaesa Toram Online<svg width=13.5 height=13.5 aria-hidden=true viewBox="0 0 24 24" class=iconExternalLink_nPIU><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></svg></a><li class=footer__item><a href=https://discord.gg/z5GUceqyhB target=_blank rel="noopener noreferrer" class=footer__link-item>Discord Comunity<svg width=13.5 height=13.5 aria-hidden=true viewBox="0 0 24 24" class=iconExternalLink_nPIU><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></svg></a></ul></div><div class="col footer__col"><div class=footer__title>Lainnya</div><ul class="footer__items clean-list"><li class=footer__item><a href=https://github.com/lyrihkaesa target=_blank rel="noopener noreferrer" class=footer__link-item>GitHub<svg width=13.5 height=13.5 aria-hidden=true viewBox="0 0 24 24" class=iconExternalLink_nPIU><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></svg></a></ul></div></div><div class="footer__bottom text--center"><div class=footer__copyright>Copyright © 2025 ‧ Build with 💗 Kaesa Lyrih ‧ Templates by <a href=https://github.com/namnguyenthanhwork style="font-weight: bold;" target=_blank>Thành</a></div></div></div></footer></div>