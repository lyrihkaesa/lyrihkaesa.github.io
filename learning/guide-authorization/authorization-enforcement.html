<!doctype html><html lang=id dir=ltr class="docs-wrapper plugin-docs plugin-id-learning docs-version-current docs-doc-page docs-doc-id-guide-authorization/authorization-enforcement" data-has-hydrated=false><meta charset=UTF-8><meta name=generator content="Docusaurus v3.7.0"><title data-rh=true>Penegakan Otorisasi | Kaesa Lyrih</title><meta data-rh=true name=viewport content="width=device-width, initial-scale=1.0"><meta data-rh=true name=twitter:card content=summary_large_image><meta data-rh=true property=og:image content=https://kaesa.charapon.my.id/img/ksa-logo-gradient-blue.png><meta data-rh=true name=twitter:image content=https://kaesa.charapon.my.id/img/ksa-logo-gradient-blue.png><meta data-rh=true property=og:url content=https://kaesa.charapon.my.id/learning/guide-authorization/authorization-enforcement><meta data-rh=true property=og:locale content=id><meta data-rh=true name=docusaurus_locale content=id><meta data-rh=true name=docsearch:language content=id><meta data-rh=true name=docusaurus_version content=current><meta data-rh=true name=docusaurus_tag content=docs-learning-current><meta data-rh=true name=docsearch:version content=current><meta data-rh=true name=docsearch:docusaurus_tag content=docs-learning-current><meta data-rh=true property=og:title content="Penegakan Otorisasi | Kaesa Lyrih"><meta data-rh=true name=description content="Penegakan otorisasi adalah proses untuk meminta keputusan otorisasi dan bertindak berdasarkan hasilnya. Setelah Anda mengetahui apakah seorang pengguna seharusnya diizinkan atau ditolak untuk mengakses suatu resource, Anda perlu mengimplementasikan aturan akses tersebut. Anda juga harus menentukan di mana penegakan ini ditempatkan, dan panduan ini akan menunjukkan cara menentukan hal tersebut."><meta data-rh=true property=og:description content="Penegakan otorisasi adalah proses untuk meminta keputusan otorisasi dan bertindak berdasarkan hasilnya. Setelah Anda mengetahui apakah seorang pengguna seharusnya diizinkan atau ditolak untuk mengakses suatu resource, Anda perlu mengimplementasikan aturan akses tersebut. Anda juga harus menentukan di mana penegakan ini ditempatkan, dan panduan ini akan menunjukkan cara menentukan hal tersebut."><link data-rh=true rel=icon href=/img/favicon.ico><link data-rh=true rel=canonical href=https://kaesa.charapon.my.id/learning/guide-authorization/authorization-enforcement><link data-rh=true rel=alternate href=https://kaesa.charapon.my.id/learning/guide-authorization/authorization-enforcement hreflang=id><link data-rh=true rel=alternate href=https://kaesa.charapon.my.id/learning/guide-authorization/authorization-enforcement hreflang=x-default><link rel=alternate type=application/rss+xml href=/blog/rss.xml title="Kaesa Lyrih RSS Feed"><link rel=alternate type=application/atom+xml href=/blog/atom.xml title="Kaesa Lyrih Atom Feed"><link rel=stylesheet href=/assets/css/styles.df960eb3.css><script src=/assets/js/runtime~main.3b5a3ba2.js defer></script><script src=/assets/js/main.becc1d29.js defer></script><body class=navigation-with-keyboard><script>!function(){var t,e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t=null!==e?e:"light",document.documentElement.setAttribute("data-theme",t)}(),function(){try{for(var[t,e]of new URLSearchParams(window.location.search).entries())if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id=__docusaurus><div role=region aria-label="Lewati ke konten utama"><a class=skipToContent_fXgn href=#__docusaurus_skipToContent_fallback>Lewati ke konten utama</a></div><nav aria-label=Utama class="navbar navbar--fixed-top"><div class=navbar__inner><div class=navbar__items><button aria-label="Alihkan bilah sisi" aria-expanded=false class="navbar__toggle clean-btn" type=button><svg width=30 height=30 viewBox="0 0 30 30" aria-hidden=true><path stroke=currentColor stroke-linecap=round stroke-miterlimit=10 stroke-width=2 d="M4 7h22M4 15h22M4 23h22"/></svg></button><a class=navbar__brand href=/><div class=navbar__logo><img src=/img/ksa-logo-gradient-blue.png alt="Kaesa lyrih" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src=/img/ksa-logo-gradient-blue.png alt="Kaesa lyrih" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Kaesa</b></a><a aria-current=page class="navbar__item navbar__link navbar__link--active" href=/learning>Learning</a><a class="navbar__item navbar__link" href=/laravel>Laravel</a><a class="navbar__item navbar__link" href=/flutter>Flutter</a><a class="navbar__item navbar__link" href=/toram>Toram Online</a></div><div class="navbar__items navbar__items--right"><a href=https://discord.gg/z5GUceqyhB target=_blank rel="noopener noreferrer" class="navbar__item navbar__link header-discord-link" aria-label=Discord></a><a href=https://github.com/lyrihkaesa target=_blank rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type=button disabled title="Ubah antara modus gelap dan modus terang (saat ini modus terang)" aria-label="Ubah antara modus gelap dan modus terang (saat ini modus terang)" aria-live=polite aria-pressed=false><svg viewBox="0 0 24 24" width=24 height=24 class=lightToggleIcon_pyhR><path fill=currentColor d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 class=darkToggleIcon_wfgR><path fill=currentColor d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"/></svg></button></div><div class=navbarSearchContainer_Bca1><div class="navbar__search searchBarContainer_NW3z" dir=ltr><input placeholder=Search aria-label=Search class="navbar__search-input searchInput_YFbd" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role=presentation class=navbar-sidebar__backdrop></div></nav><div id=__docusaurus_skipToContent_fallback class="main-wrapper mainWrapper_z2l0"><div class=docsWrapper_hBAB><button aria-label="Gulir kembali ke atas" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type=button></button><div class=docRoot_UBD9><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class=sidebarViewport_aRkj><div class=sidebar_njMd><nav aria-label="Bilah sisi dokumentasi" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/learning>📔 Catatan Belajar Kaesa</a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/learning/category/windows>Windows</a><button aria-label="Perluas kategori bilah sisi 'Windows'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/learning/category/linux>Linux</a><button aria-label="Perluas kategori bilah sisi 'Linux'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/learning/category/figma-uiux>Figma UI/UX</a><button aria-label="Perluas kategori bilah sisi 'Figma UI/UX'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/learning/category/nextjs>NextJS</a><button aria-label="Perluas kategori bilah sisi 'NextJS'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/learning/category/docker>Docker</a><button aria-label="Perluas kategori bilah sisi 'Docker'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/learning/category/git>Git</a><button aria-label="Perluas kategori bilah sisi 'Git'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/learning/category/uml>UML</a><button aria-label="Perluas kategori bilah sisi 'UML'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/learning/category/dbms>DBMS</a><button aria-label="Perluas kategori bilah sisi 'DBMS'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/learning/category/networking>Networking</a><button aria-label="Perluas kategori bilah sisi 'Networking'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/learning/category/uat>UAT</a><button aria-label="Perluas kategori bilah sisi 'UAT'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/learning/category/vscode>VSCode</a><button aria-label="Perluas kategori bilah sisi 'VSCode'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/learning/category/konsep-mvc>Konsep MVC</a><button aria-label="Perluas kategori bilah sisi 'Konsep MVC'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--active" href=/learning/category/vscode-1>VSCode</a><button aria-label="Ciutkan kategori bilah sisi 'VSCode'" aria-expanded=true type=button class="clean-btn menu__caret"></button></div><ul style=display:block;overflow:visible;height:auto class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/learning/guide-authorization/awalan>Awalan</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/learning/guide-authorization/intro>Pengantar Authorization Academy</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/learning/guide-authorization/dua>Apa itu Otorisasi?</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/learning/guide-authorization/rbac>Role-Based Access Control (RBAC)</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/learning/guide-authorization/rabac>Kontrol Akses Berdasarkan Hubungan (ReBAC)</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current=page tabindex=0 href=/learning/guide-authorization/authorization-enforcement>Penegakan Otorisasi</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/learning/guide-authorization/auth-microservices>Otorisasi dalam Microservices</a></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/learning/category/project-manager-pemula>Project Manager Pemula</a><button aria-label="Perluas kategori bilah sisi 'Project Manager Pemula'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/learning/category/magang-socha-informatika>Magang Socha Informatika</a><button aria-label="Perluas kategori bilah sisi 'Magang Socha Informatika'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/learning/category/toefl>TOEFL</a><button aria-label="Perluas kategori bilah sisi 'TOEFL'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/learning/lainnya/ward-end-peppard>lainnya</a></div></ul></nav><button type=button title="Ciutkan bilah sisi" aria-label="Ciutkan bilah sisi" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width=20 height=20 aria-hidden=true class=collapseSidebarButtonIcon_kv0_><g fill=#7a7a7a><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"/><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"/></g></svg></button></div></div></aside><main class=docMainContainer_TBSr><div class="container padding-top--md padding-bottom--lg"><div class=row><div class="col docItemCol_VOVn"><div class=docItemContainer_Djhp><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Runut navigasi"><ul class=breadcrumbs itemscope itemtype=https://schema.org/BreadcrumbList><li class=breadcrumbs__item><a aria-label="Halaman utama" class=breadcrumbs__link href=/><svg viewBox="0 0 24 24" class=breadcrumbHomeIcon_YNFT><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill=currentColor /></svg></a><li itemscope itemprop=itemListElement itemtype=https://schema.org/ListItem class=breadcrumbs__item><a class=breadcrumbs__link itemprop=item href=/learning/category/vscode-1><span itemprop=name>VSCode</span></a><meta itemprop=position content=1><li itemscope itemprop=itemListElement itemtype=https://schema.org/ListItem class="breadcrumbs__item breadcrumbs__item--active"><span class=breadcrumbs__link itemprop=name>Penegakan Otorisasi</span><meta itemprop=position content=2></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type=button class="clean-btn tocCollapsibleButton_TO0P">Pada halaman ini</button></div><div class="theme-doc-markdown markdown"><header><h1>Penegakan Otorisasi</h1></header>
<p>Penegakan otorisasi adalah proses untuk meminta keputusan otorisasi dan bertindak berdasarkan hasilnya. Setelah Anda mengetahui apakah seorang pengguna seharusnya diizinkan atau ditolak untuk mengakses suatu resource, Anda perlu mengimplementasikan aturan akses tersebut. Anda juga harus menentukan di mana penegakan ini ditempatkan, dan panduan ini akan menunjukkan cara menentukan hal tersebut.</p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=1-apa-yang-dibahas-dalam-panduan-ini>1. Apa yang Dibahas dalam Panduan Ini<a href=#1-apa-yang-dibahas-dalam-panduan-ini class=hash-link aria-label="Taut langsung ke 1. Apa yang Dibahas dalam Panduan Ini" title="Taut langsung ke 1. Apa yang Dibahas dalam Panduan Ini">​</a></h3>
<p>Pada Bab II, kita telah membahas arsitektur otorisasi dan menelusuri alur hidup sebuah permintaan dalam aplikasi contoh GitClub. Kita melihat ada beberapa titik di mana kita mungkin ingin menambahkan otorisasi, dan semua itu berpusat pada pertanyaan: apakah <strong>actor</strong> diizinkan untuk melakukan <strong>action</strong> pada <strong>resource</strong> tertentu? Pertanyaan inilah yang membentuk antarmuka otorisasi kita, dan dua sisi dari antarmuka tersebut adalah keputusan dan penegakan.</p>
<p>Pada Bab III dan IV, kita melihat bagaimana kita dapat menggunakan model otorisasi untuk membuat keputusan otorisasi. Model-model tersebut mencakup peran dan hubungan.</p>
<p>Bab ini membahas <strong>penegakan</strong>, bagian kedua dari persamaan <em>otorisasi = keputusan + penegakan</em> yang telah kita perkenalkan di Bab II. Di sini, kita menyediakan model untuk menentukan di mana sebaiknya otorisasi ditegakkan, apa saja yang harus ditegakkan di titik-titik tersebut, bagaimana menghubungkan penegakan dengan mekanisme keputusan, dan apa yang harus dilakukan dengan hasil keputusan tersebut.</p>
<p>Seperti pada bab-bab sebelumnya, kita akan terus menggunakan aplikasi contoh GitClub. Sebagai pengingat: GitClub adalah situs web untuk hosting kode sumber, kolaborasi, dan version control, mirip dengan aplikasi nyata seperti GitLab dan GitHub. GitClub memberikan contoh murni tentang apa yang memotivasi otorisasi sejak awal — yaitu mengamankan akses ke resource. Sebuah "resource" adalah "sesuatu yang dapat diakses", seperti sebuah repository di GitClub. Pengguna mungkin dapat membaca atau melakukan perubahan pada repository tersebut, atau mungkin tidak.</p>
<hr>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=apa-itu-penegakan-otorisasi>Apa itu Penegakan Otorisasi?<a href=#apa-itu-penegakan-otorisasi class=hash-link aria-label="Taut langsung ke Apa itu Penegakan Otorisasi?" title="Taut langsung ke Apa itu Penegakan Otorisasi?">​</a></h4>
<p>Pada dua bab terakhir, kita telah menelusuri cara membuat <strong>keputusan otorisasi</strong>: apakah actor diizinkan melakukan aksi pada resource tertentu? Penegakan adalah proses untuk meminta <strong>keputusan otorisasi tersebut dan bertindak berdasarkan hasilnya</strong>.</p>
<p>Dengan kata lain, penegakan adalah bagian yang Anda tambahkan ke dalam aplikasi Anda untuk benar-benar mencegah pengguna mengakses data yang tidak seharusnya mereka akses.</p>
<p><img decoding=async loading=lazy src=https://cdn.prod.website-files.com/5f1483105c9a72fd0a3b662a/60cb67c66b560f5ed529d523_NBCbp33ErpxKQ3e25k_5ZU3qXZR2f-UauBEBAl-JefmXiFnDBtE2avoYoPstUWrS_1bMeoLBVwj_7hMZHpG3WZp9H9hlfTr1Osya5Zd3fzCB7-yzAXdsesST-VX1OSi6iN8TpWsY.png alt="Alur penegakan otorisasi" class=img_ev3q></p>
<p>Di aplikasi GitClub, salah satu contoh penegakan adalah pada kode yang menangani pengambilan dan pengembalian sebuah repository. Untuk meminta keputusan otorisasi, pertama-tama kita menentukan query otorisasi: apakah pengguna saat ini diizinkan untuk membaca repository yang diminta? Di GitClub, kita menangani otorisasi melalui sebuah library. Jadi, meminta keputusan berarti memanggil metode library, misalnya <code>is_allowed(user, "read", repository)</code>.</p>
<p>Kita akan mendapatkan sebuah keputusan. Jika keputusannya "allow", maka permintaan dilanjutkan seperti biasa. Namun, jika keputusannya "deny", maka kita akan mengembalikan error kepada pengguna.</p>
<hr>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=di-mana-menegakkan-otorisasi>Di Mana Menegakkan Otorisasi?<a href=#di-mana-menegakkan-otorisasi class=hash-link aria-label="Taut langsung ke Di Mana Menegakkan Otorisasi?" title="Taut langsung ke Di Mana Menegakkan Otorisasi?">​</a></h4>
<p>Sebaiknya kita memikirkan di mana menambahkan penegakan dengan melihat lapisan-lapisan dalam arsitektur multitier. Kita tidak akan menulis buku tentang pola arsitektur di sini, jadi jika Anda belum familiar, Anda bisa melihat di <a href=https://en.wikipedia.org/wiki/Multitier_architecture target=_blank rel="noopener noreferrer">Wikipedia</a> untuk memahami konteksnya.</p>
<p><strong>Lapisan-lapisan di GitClub:</strong></p>
<ul>
<li>
<p><strong>Lapisan Layanan (Service layer):</strong><br>
<!-- -->Bertanggung jawab untuk menangani dan merutekan permintaan. Di GitClub, lapisan ini mencakup proxy jaringan dan router dalam aplikasi itu sendiri.</p>
</li>
<li>
<p><strong>Lapisan Logika Bisnis (Business logic layer):</strong><br>
<!-- -->Tempat menjalankan fungsi-fungsi inti aplikasi GitClub.</p>
</li>
<li>
<p><strong>Lapisan Data (Data layer):</strong><br>
<!-- -->Menyediakan akses ke data. Di GitClub, ini adalah basis data dan sistem berkas tempat penyimpanan data repository.</p>
</li>
<li>
<p><strong>Lapisan Presentasi (Presentation layer):</strong><br>
<!-- -->Apa yang ditampilkan kepada pengguna. Ini adalah antarmuka web GitClub yang akan Anda lihat ketika mengunjungi (hipotetis) <a href=https://www.gitclub.dev/ target=_blank rel="noopener noreferrer">https://www.gitclub.dev</a>.</p>
</li>
</ul>
<p>Untuk setiap lapisan aplikasi, terdapat level otorisasi yang berbeda. Level-level tersebut dibedakan berdasarkan data yang digunakan untuk membuat keputusan otorisasi.</p>
<p><img decoding=async loading=lazy src=https://cdn.prod.website-files.com/5f1483105c9a72fd0a3b662a/60cb7dabb5130d231e47b562_k3n18FhZddHnKIl5nWJ1B3SiLtQ1gWwIzpw2vWHlpyXr8g4PPARRhtdV_8SqdNk8cTOL86h4hn-X9slsZTxCpoaaX6OqtqzXW6jDQlgk8jh_dGK2mh-GMK8wK3JcGT6k70My4si_.avif alt="Alur data dari lapisan penegakan ke titik keputusan" class=img_ev3q></p>
<p><strong>Level otorisasi:</strong></p>
<ul>
<li>
<p><strong>Lapisan Layanan:</strong><br>
<!-- -->Pada lapisan ini, kita dapat membuat keputusan otorisasi berdasarkan isi permintaan. Karena konteks aplikasi masih terbatas, praktisnya hanya bisa menentukan apakah endpoint dapat diakses atau tidak. Ini disebut otorisasi <strong>tingkat permintaan</strong>.</p>
</li>
<li>
<p><strong>Lapisan Logika Bisnis:</strong><br>
<!-- -->Di lapisan ini, kita memiliki konteks penuh mengenai apa yang dilakukan pengguna dan resource apa yang diakses. Ini disebut otorisasi <strong>tingkat resource</strong>.</p>
</li>
<li>
<p><strong>Lapisan Data:</strong><br>
<!-- -->Saat melakukan otorisasi secara massal atas kumpulan data, ada baiknya untuk mendorongnya ke lapisan data. Caranya adalah dengan menerapkan otorisasi pada komunikasi dengan lapisan data. Ini disebut otorisasi <strong>tingkat query</strong>.</p>
</li>
<li>
<p><strong>Lapisan Presentasi:</strong><br>
<!-- -->Kita juga dapat menerapkan otorisasi di sisi klien, yaitu <strong>otorisasi sisi klien</strong>. Namun, berbeda dengan level lainnya, otorisasi di sini tidak dapat diandalkan untuk penegakan karena pengguna dapat mengakali klien dan mengakses backend secara langsung.</p>
</li>
</ul>
<p>Di bagian selanjutnya, kita akan membahas setiap lapisan dan level secara rinci, termasuk langkah-langkah untuk menyusun query, mengirimkannya ke mekanisme keputusan, dan menangani responsnya.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=2-penegakan-otorisasi-berdasarkan-lapisan-dan-level>2. Penegakan Otorisasi Berdasarkan Lapisan dan Level<a href=#2-penegakan-otorisasi-berdasarkan-lapisan-dan-level class=hash-link aria-label="Taut langsung ke 2. Penegakan Otorisasi Berdasarkan Lapisan dan Level" title="Taut langsung ke 2. Penegakan Otorisasi Berdasarkan Lapisan dan Level">​</a></h2>
<p>Mari kita bahas setiap lapisan secara bergiliran dan lihat seperti apa penegakan otorisasi di masing-masing lapisan. Kita akan tinggalkan lapisan presentasi untuk bagian akhir karena sedikit berbeda dibandingkan lapisan-lapisan lainnya.</p>
<hr>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=lapisan-layanan-dan-otorisasi-tingkat-permintaan><strong>Lapisan Layanan dan Otorisasi Tingkat Permintaan</strong><a href=#lapisan-layanan-dan-otorisasi-tingkat-permintaan class=hash-link aria-label="Taut langsung ke lapisan-layanan-dan-otorisasi-tingkat-permintaan" title="Taut langsung ke lapisan-layanan-dan-otorisasi-tingkat-permintaan">​</a></h4>
<p>Pada lapisan layanan, kita berurusan dengan permintaan HTTP mentah. Di GitClub, salah satu tempat kita menangani permintaan HTTP adalah pada <em>middleware</em> permintaan. Hampir setiap kerangka kerja web menyediakan semacam <em>middleware</em> permintaan yang dapat Anda gunakan untuk menerapkan logika yang sama untuk setiap permintaan.</p>
<p><img decoding=async loading=lazy src=https://cdn.prod.website-files.com/5f1483105c9a72fd0a3b662a/60cb7db9edf92bf77208854f_Jcrx3xNVj3btFkPqyi3hYNnRZ25eE-l9OEkTYQ1EDrob7WN1g2P8VfCNyyz_U-U6F61XkbFh1VGKfjx5jZTPPQt5uEV4T2_TYUaemgGoeOxU7uPmlsPXxaw6Bd_IZCNfx0Bzbk_n.avif alt="Alur penegakan untuk permintaan HTTP" class=img_ev3q></p>
<p><strong>Apa itu otorisasi tingkat permintaan?</strong></p>
<p>Otorisasi tingkat permintaan dilakukan pada lapisan layanan dengan menggunakan informasi yang tersedia dalam permintaan itu sendiri untuk membuat keputusan otorisasi. Pada tingkat ini, terdapat satu jenis query: “apakah actor diizinkan membuat permintaan ini ke layanan ini?”<br>
<!-- -->Dalam kasus permintaan HTTP, informasi yang digunakan untuk membuat keputusan otorisasi biasanya adalah path permintaan dan metode HTTP.</p>
<p>Seringkali, data pengguna juga tersedia. Misalnya, banyak aplikasi menangani sesi pengguna sebagai bagian dari <em>middleware</em> atau menyertakan data tambahan tentang pengguna sebagai bagian dari kredensial autentikasi. Namun, biasanya Anda tidak perlu mengambil resource dari basis data pada lapisan layanan, karena hal tersebut akan menduplikasi pekerjaan yang akan dilakukan di lapisan bisnis.</p>
<p>Pembatasan ini mencegah kita menerapkan banyak model otorisasi karena model-model yang telah kita bahas di bab-bab sebelumnya bergantung pada data aplikasi untuk membuat keputusan.</p>
<p>Mari kita lihat beberapa contoh dan apa yang menjadi actor, action, dan resource pada masing-masing kasus.</p>
<p><strong>Contoh: Seorang pengguna yang tidak login mengunjungi halaman utama</strong></p>
<ul>
<li><strong>Actor:</strong> Saat pengguna belum login, actor dianggap sebagai <em>guest</em>.</li>
<li><strong>Action:</strong> Melakukan permintaan GET ke <code>/home</code>.</li>
<li><strong>Resource:</strong> Aplikasi web GitClub.</li>
</ul>
<p>Query otorisasi: Apakah tamu diizinkan melakukan permintaan GET ke route <code>/home</code> pada aplikasi web GitClub?</p>
<p>Untuk keputusannya, kita menerapkan aturan: “siapa pun boleh melakukan permintaan GET ke route yang diawali dengan <code>/home</code> pada aplikasi web.” Kita juga harus memastikan bahwa tamu dapat mengunjungi halaman login. Permintaan lain akan ditolak dan pengguna akan dialihkan ke halaman login.</p>
<p><strong>Contoh: GitClub CLI menggunakan API token untuk membuka pull request baru di repository Acme/Anvil</strong></p>
<ul>
<li><strong>Actor:</strong> Saat menggunakan API token, identitas actor adalah pemegang token.</li>
<li><strong>Action:</strong> Melakukan permintaan POST ke <code>/org/acme/repo/anvil/pull_requests</code>.</li>
<li><strong>Resource:</strong> Layanan API GitClub.</li>
</ul>
<p>Query otorisasi: Apakah API token tersebut diizinkan melakukan permintaan POST ke endpoint <code>/org/acme/repo/anvil/pull_requests</code> pada layanan API GitClub?</p>
<p>Dalam kasus ini, kita tidak dapat secara langsung menentukan apakah permintaan tersebut harus diizinkan, karena kita belum mengetahui apakah pengguna yang membuat token memiliki izin untuk membuka pull request di repository Acme/Anvil. Namun, kita dapat menggunakan informasi dalam permintaan untuk membuat keputusan awal. API token adalah token kriptografis yang menyertakan hak akses yang diberikan kepada pemegang token. Oleh karena itu, kita dapat memutuskan berdasarkan apakah token memiliki izin “repository<!-- -->:write<!-- -->”.</p>
<p>Karena logika yang sama diperlukan untuk setiap endpoint API, dengan menggunakan otorisasi tingkat permintaan pada lapisan layanan, kita dapat menangani hal ini di satu tempat saja.</p>
<p>Meski begitu, otorisasi yang ditangani di sini masih bersifat cukup kasar. Misalnya, aplikasi masih perlu memeriksa apakah pengguna yang membuat token benar-benar diizinkan membuka pull request di Acme/Anvil. Pengecekan ini harus dilakukan di tingkat resource pada lapisan bisnis. Keuntungannya adalah logika penanganan API token ditangani di lapisan layanan, sehingga informasi tersebut tidak perlu diteruskan ke lapisan bisnis.</p>
<p><strong>Di mana menerapkan otorisasi tingkat permintaan?</strong></p>
<p>Dalam aplikasi monolitik, <em>middleware</em> permintaan adalah tempat terbaik untuk mengimplementasikan otorisasi tingkat permintaan. Pendekatan terbaik adalah menerapkan otorisasi untuk <em>setiap</em> permintaan dan menggunakan mekanisme opt-out untuk route-route tertentu yang tidak memerlukan otorisasi.</p>
<p>Dalam arsitektur berbasis layanan, Anda juga dapat menambahkan pengecekan otorisasi tingkat permintaan sebagai bagian dari proxy jaringan, seperti API gateway, service mesh, atau load balancer. Proxy jaringan dapat menerapkan otorisasi tingkat permintaan dengan mendelegasikan keputusan otorisasi ke layanan pusat. Seperti yang kita lihat pada contoh sebelumnya, layanan tersebut biasanya perlu mengakses data pengguna.</p>
<p><strong>Apa yang harus dikembalikan?</strong></p>
<p>Untuk permintaan API, sebaiknya kembalikan pesan error HTTP 403 Forbidden beserta detail error dalam body respons.</p>
<hr>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=lapisan-logika-bisnis-dan-otorisasi-tingkat-resource><strong>Lapisan Logika Bisnis dan Otorisasi Tingkat Resource</strong><a href=#lapisan-logika-bisnis-dan-otorisasi-tingkat-resource class=hash-link aria-label="Taut langsung ke lapisan-logika-bisnis-dan-otorisasi-tingkat-resource" title="Taut langsung ke lapisan-logika-bisnis-dan-otorisasi-tingkat-resource">​</a></h4>
<p>Setelah permintaan berhasil dirutekan dengan benar, kita memasuki logika bisnis aplikasi. Inilah tempat “keajaiban” terjadi! Di sini, aplikasi mengambil data, melakukan operasi, memperbarui data lainnya, dan memicu pekerjaan latar belakang.</p>
<p>Pada lapisan logika bisnis, kode sering kali bekerja dengan objek, kelas, atau tipe data yang merepresentasikan konsep inti domain aplikasi. Di sinilah sebagian besar otorisasi biasanya terjadi, dalam bentuk otorisasi tingkat resource.</p>
<p><img decoding=async loading=lazy src=https://cdn.prod.website-files.com/5f1483105c9a72fd0a3b662a/60cb7dc99f0fbd888f11ad0f_c0bhUGr_CuluarO0stbOl_AvQIT17riz2mWVaJUemWXA3LHuXdgTrxuf0hqIEeTSzd-S7bG7tlIlbtynvEzK7ArStPjZZA8BNAn4e47eSDD1IkHetGhInw65dR__GpMg9ZH4iVC5.avif alt="Alur penegakan otorisasi pada logika bisnis" class=img_ev3q></p>
<p><strong>Apa itu otorisasi tingkat resource?</strong></p>
<p>Sebuah “resource” merujuk pada setiap potongan data yang mungkin diakses atau diinteraksikan oleh pengguna dalam sebuah aplikasi. Organisasi, repository, isu, dan komentar adalah contoh resource di GitClub.</p>
<p>Otorisasi tingkat resource menggunakan data resource dan informasi terkait secara langsung ketika membuat keputusan. Contoh yang kita gunakan pada bab-bab sebelumnya adalah otorisasi tingkat resource. Misalnya, “apakah pengguna diizinkan membaca isu #1313 dari repository Acme/Anvil?” merupakan pengecekan tingkat resource.</p>
<p><strong>Apa yang harus ditegakkan?</strong></p>
<p>Bayangkan seorang teman bertanya: “Bolehkah aku masuk ke apartemenmu?” Anda mungkin akan kesulitan menjawab tanpa konteks tambahan, seperti “apa yang ingin kamu lakukan?” Mungkin mereka hanya ingin mengambil jaket yang tertinggal. Akan lebih mudah menjawab jika pertanyaannya adalah “bolehkah aku mengambil jaket saya di apartemenmu?”</p>
<p>Kita menghadapi masalah yang sama dengan otorisasi aplikasi. Misalnya, jika kita menangani permintaan pengguna untuk menutup isu #312 dari repository Acme/Anvil, query otorisasi paling spesifik yang bisa kita buat adalah: “apakah <strong>pengguna</strong> (actor) diizinkan untuk <strong>menutup</strong> (action) <strong>isu #312 dari repository Acme/Anvil</strong> (resource)?”<br>
<!-- -->Spesifikasi yang tinggi ini memberikan mekanisme keputusan dengan informasi sebanyak mungkin, sehingga mereka dapat menentukan jawaban terbaik.</p>
<p>Jika kita membuat query otorisasi lebih umum, misalnya “apakah <strong>pengguna</strong> diizinkan untuk <strong>mengedit</strong> repository Acme/Anvil?”, maka kita dapat dengan mudah membuat keputusan berdasarkan izin apa yang dimiliki pengguna untuk repository tersebut. Query yang sama bisa digunakan untuk setiap perubahan yang diminta pengguna pada repository.<br>
<!-- -->Namun, dengan cara tersebut, kita telah mengorbankan informasi penting yang diperlukan untuk membuat keputusan yang tepat. Misalnya, jika pengguna sebenarnya bukan anggota repository tetapi merupakan kolaborator eksternal yang membuka isu, seharusnya kita menggunakan otorisasi berbasis hubungan untuk menentukan bahwa pemilik isu dapat menutup isu, yang didukung oleh query otorisasi yang lebih spesifik.</p>
<p>Masalahnya adalah logika otorisasi mulai "bocor" ke dalam kode aplikasi. Kita secara implisit mengasumsikan bahwa pengguna dapat menutup isu jika mereka dapat mengedit repository yang dimiliki isu tersebut.</p>
<p><strong>Intinya, selalu buat query otorisasi sedetail mungkin.</strong><br>
<!-- -->Hal ini menjaga logika otorisasi tetap terpisah, mengurangi kompleksitas dalam menentukan apa yang harus ditegakkan, dan memungkinkan logika keputusan lebih fleksibel.</p>
<p><strong>Di mana menerapkan otorisasi tingkat resource?</strong></p>
<p>Tempat terbaik untuk menambahkan otorisasi tingkat resource adalah di dalam kode aplikasi, sedekat mungkin dengan tempat aksi yang dimaksud dilakukan.</p>
<p>Jika resource sudah tersedia, kita dapat langsung melakukan pengecekan otorisasi. Ini sering terjadi saat membuat resource baru.</p>
<p>Jika tidak, kita mungkin perlu mengambil resource terlebih dahulu, menerapkan pengecekan akses, lalu melakukan aksi yang diinginkan. Misalnya, saat membaca data, langkah pertama adalah mengambil resource dari basis data, kemudian memeriksa apakah pengguna diizinkan membaca resource tersebut. (Pada bagian selanjutnya, kita akan membahas pendekatan alternatif.)</p>
<p><strong>Apa yang harus dikembalikan?</strong></p>
<p>Strategi default saat terjadi kegagalan otorisasi adalah mengembalikan pesan error HTTP 403 Forbidden, beserta detail yang dapat membantu klien.</p>
<p>Namun, dalam beberapa kasus, mengembalikan pesan error dapat mengungkap informasi yang seharusnya tidak diketahui oleh pengguna. Sebagai contoh, jika seorang pengguna GitClub mengunjungi <code>/org/acme/repo/secret_project</code> – sebuah repository privat – maka pesan 403 Forbidden mungkin akan mengungkapkan bahwa repository tersebut ada.<br>
<!-- -->Oleh karena itu, praktik terbaik adalah mengembalikan pesan HTTP 404 Not Found ketika pengguna tidak diizinkan membaca resource, terlepas dari aksi yang diminta.</p>
<p><strong>Field-level access</strong></p>
<p>Sering kali kita ingin mengendalikan field apa saja dari sebuah resource yang dapat diakses oleh pengguna.</p>
<p>Misalnya, di GitClub, pengguna dapat melihat profil mereka sendiri dan melihat seluruh data tentang mereka. Namun, ketika melihat profil pengguna lain, mereka hanya dapat melihat sebagian data.</p>
<p>Hal ini dikenal sebagai <strong>field-level access</strong>. Ini merupakan level tambahan di luar otorisasi tingkat resource.</p>
<p>Ada dua cara untuk menangani penegakan field-level:</p>
<ol>
<li><strong>Pendekatan Individual:</strong> Buat aksi baru yang lebih spesifik untuk mewakili field yang diakses.</li>
<li><strong>Pendekatan Generik:</strong> Jadikan field tersebut sebagai parameter tambahan pada query otorisasi.</li>
</ol>
<p>Pendekatan individual tidak memerlukan pekerjaan tambahan di atas otorisasi tingkat resource, namun sedikit kurang fleksibel. Pendekatan kedua lebih powerful, tetapi memerlukan perubahan pada antarmuka otorisasi.<br>
<!-- -->Misalnya, di GitClub, pengguna diizinkan mengubah repository. Mereka dapat mengubah nama, menambahkan deskripsi, menetapkan tag, dan sebagainya melalui metode “update repository”. Kita menggunakan otorisasi tingkat resource untuk memeriksa apakah pengguna diizinkan memperbarui repository.<br>
<!-- -->Namun, sekarang kita ingin membatasi agar hanya admin organisasi yang diizinkan mengubah status privasi repository. Pendekatan saat ini tidak dapat menangani hal ini karena kita hanya memeriksa apakah pengguna diizinkan memperbarui repository.<br>
<!-- -->Pendekatan <strong>individual</strong> untuk penegakan field-level cocok untuk sejumlah kecil field, tetapi seiring waktu dapat menyebabkan logika otorisasi tersebar di dalam aplikasi.<br>
<!-- -->Pendekatan <strong>generik</strong> akan mengubah query untuk menyertakan field yang diminta. Sebagai contoh, daripada hanya mempertimbangkan aksi “update”, query akan menyertakan konteks lengkap field-field yang diupdate. Dengan cara ini, mekanisme keputusan akan menangani logika: jika permintaan update menyertakan atribut “private”, maka pengguna harus memiliki izin “change_visibility” pada repository tersebut.<br>
<!-- -->Kekurangannya adalah Anda perlu memperbarui antarmuka otorisasi untuk menangani parameter tambahan — field.<br>
<!-- -->Jika hanya ada beberapa field yang perlu diatur, pendekatan individual mungkin sudah cukup.</p>
<hr>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=lapisan-data-dan-otorisasi-tingkat-query><strong>Lapisan Data dan Otorisasi Tingkat Query</strong><a href=#lapisan-data-dan-otorisasi-tingkat-query class=hash-link aria-label="Taut langsung ke lapisan-data-dan-otorisasi-tingkat-query" title="Taut langsung ke lapisan-data-dan-otorisasi-tingkat-query">​</a></h4>
<p>Otorisasi tingkat resource memiliki satu kekurangan besar: Anda harus mengambil resource terlebih dahulu untuk melakukan pengecekan otorisasi.</p>
<p>Hal ini mungkin terdengar sepele karena kita biasanya memang ingin mengambil resource tersebut. Namun, jika Anda harus mengambil setiap resource secara individu untuk melakukan otorisasi, hal ini menjadi masalah ketika mengimplementasikan endpoint list yang mengambil banyak resource.</p>
<p>Di GitClub, kita menyediakan endpoint yang menampilkan semua repository yang dapat diakses oleh seorang pengguna. Melakukan ini dengan otorisasi tingkat resource berarti mengambil <em>setiap</em> repository dari basis data dan meminta keputusan otorisasi untuk masing-masing.<br>
<!-- -->Sebagai gantinya, kita dapat mendorong otorisasi ke lapisan data dan menggunakan <strong>otorisasi tingkat query</strong>. Lapisan data biasanya merujuk ke basis data, meskipun juga dapat mencakup layanan lain.</p>
<p><img decoding=async loading=lazy src=https://cdn.prod.website-files.com/5f1483105c9a72fd0a3b662a/60cb7dde8be7289162fcaaa3_XJt2sVlB_XBhzAdsBq0GuJt2btwlJdUkH8u8UY_vArnPYt1-Jlt6UhNofMLuwXd4eDl3bfl4OFA6h725UFi-wOpwEo8g81RKpIs-wHZWHIaiV1reyj_tQOJytrfr_Zz8SgwR0IhL.avif alt="Alur penegakan untuk query basis data" class=img_ev3q></p>
<p><strong>Apa itu otorisasi tingkat query?</strong></p>
<p>Otorisasi tingkat query adalah pendekatan untuk menerapkan otorisasi pada lapisan data dengan memodifikasi query akses data (misalnya, query SQL) untuk menyertakan parameter otorisasi.<br>
<!-- -->Pendekatan ini melibatkan antarmuka otorisasi yang berbeda dari yang telah kita lihat sejauh ini. Keputusan otorisasi bukan lagi berupa jawaban ya/tidak tunggal, melainkan keputusan harus dibuat untuk setiap resource dalam dataset dengan mengenkode keputusan tersebut sebagai filter pada query.</p>
<p>Sebagai contoh sederhana, kita tahu bahwa seorang pengguna dapat membaca repository yang mereka buat. Untuk merefleksikan logika ini, query untuk mengambil semua repository dapat menyertakan kondisi “where created_by = [ID pengguna saat ini]”. Dengan ini, basis data akan difilter sehingga hanya resource yang diizinkan yang dikembalikan.</p>
<p><strong>Keputusan dan Penegakan</strong></p>
<p>Anda dapat memandang query otorisasi tingkat query sebagai: “apakah actor diizinkan melakukan aksi terhadap semua resource yang dihasilkan oleh query ini?”<br>
<!-- -->Sebagai contoh, query akan menjadi: apakah pengguna diizinkan melakukan aksi “read” terhadap repository yang dihasilkan dari query tabel “repositories”?</p>
<p>Pada contoh penegakan sebelumnya, keputusan otorisasi adalah jawaban sederhana ya/tidak. Namun, untuk otorisasi tingkat query, keputusan harus mencakup semua kondisi yang harus diterapkan sebagai filter pada query.</p>
<p>Di GitClub, beberapa skenario di mana seseorang dapat membaca repository antara lain:</p>
<ul>
<li>Repository bersifat publik.</li>
<li>Pengguna telah ditambahkan sebagai kolaborator pada repository.</li>
<li>Pengguna memiliki peran dalam organisasi tempat repository berada.</li>
</ul>
<p>Setiap kondisi ini perlu direpresentasikan sedemikian rupa sehingga mekanisme penegakan dapat menerjemahkannya menjadi filter query. Semakin fleksibel format kondisi tersebut, semakin extensible logika otorisasi. Namun, ini memerlukan implementasi mekanisme keputusan yang dapat mengembalikan kondisi-kondisi arbitrer. Di Oso, hal ini dimungkinkan dengan bahasa kebijakan Polar yang dapat mengembalikan seperangkat batasan sebagai output dari query otorisasi.</p>
<p>Anda dapat menghindari penggunaan bahasa kebijakan penuh dengan mengorbankan fleksibilitas dan menentukan sejumlah kondisi terbatas yang dapat dikembalikan oleh mekanisme keputusan. Misalnya, kondisi yang mungkin dikembalikan:</p>
<ul>
<li>"repository_is_public" – periksa apakah repository bersifat publik.</li>
<li>"user_has_repository_role_contributor" – periksa apakah pengguna memiliki peran “contributor” pada repository.</li>
<li>"user_has_organization_role_member" – periksa apakah pengguna memiliki peran “member” pada organisasi tempat repository berada.</li>
</ul>
<p>Peran mekanisme penegakan adalah memproses kondisi-kondisi yang dikembalikan oleh mekanisme keputusan dan menerapkannya ke query. Anda dapat menganggap penegakan ini sebagai penegakan secara <em>proaktif</em>, dibandingkan dengan penegakan secara <em>retroaktif</em> setelah data diambil.</p>
<p>Kami mengasumsikan bahwa lapisan data mendukung beberapa bentuk penyaringan, baik itu melalui basis data, mesin pencari, atau layanan eksternal lainnya. Untuk menerapkan otorisasi tingkat query, Anda harus dapat menerjemahkan setiap kondisi yang dikembalikan menjadi filter yang didukung oleh lapisan data tersebut.</p>
<p>Contoh, masing-masing kondisi sebelumnya dapat diimplementasikan sebagai filter SQL:</p>
<p><img decoding=async loading=lazy src=https://cdn.prod.website-files.com/5f1483105c9a72fd0a3b662a/60cb6950892b85b2672e39fc_Knsgk-ZJ29UYciyIbFFUW0NpxYtKxe8hf9Y-0wofeY8xvOp8cLG-kl6uaDISGUPJbp02pI0_ojtqIfGB0NJ6tmzYWiYh-sOhHqT-NVPPK1r7WK1yzJaknEA4iDe9znzCsQX9kzt2.avif alt="Filter SQL yang mengimplementasikan penegakan" class=img_ev3q></p>
<p><strong>Di mana menerapkan?</strong></p>
<p>Otorisasi tingkat query harus diterapkan di lapisan akses data – bagian kode aplikasi yang bertanggung jawab untuk mengambil data dari basis data atau sumber lain.</p>
<p>Query otorisasi masih membutuhkan konteks yang sama seperti otorisasi tingkat resource, seperti pengguna saat ini dan aksi yang dilakukan. Konteks tersebut harus menjadi bagian dari antarmuka query.</p>
<p><strong>Apa yang dikembalikan?</strong></p>
<p>Karena otorisasi diterapkan dengan memfilter dataset, tidak ada perlunya penanganan khusus terhadap hasilnya. Bagi kode aplikasi, resource yang tidak diizinkan akan tampak seolah-olah tidak ada. Pendekatan ini ideal untuk aksi "read".</p>
<p>Namun, dalam beberapa kasus, lebih baik membedakan antara “tidak ada hasil” dan “tidak diizinkan”. Misalnya, jika pengguna GitClub mencoba menampilkan daftar tim untuk suatu organisasi, bisa jadi tidak ada hasil karena pengguna tidak tergabung dalam organisasi tersebut, atau karena semua tim bersifat privat. Untuk membedakan kedua kasus tersebut, Anda dapat menambahkan pengecekan tingkat resource tambahan: apakah pengguna diizinkan untuk “list teams” pada organisasi tersebut. Jika tidak, kembalikan error atau alihkan pengguna. Jika ya, lanjutkan dengan pengecekan tingkat query.</p>
<p>Otorisasi tingkat query juga dapat digunakan untuk menggantikan beberapa pengecekan tingkat resource. Misalnya, daripada mengambil repository dari basis data dan kemudian memeriksa apakah pengguna memiliki izin membaca, Anda bisa melakukan kedua langkah tersebut sekaligus menggunakan otorisasi tingkat query. Pendekatan ini bagus ketika Anda ingin menghindari mengungkapkan keberadaan resource, seperti yang telah kita bahas pada pengecekan tingkat resource.</p>
<hr>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=lapisan-presentasi-dan-otorisasi-sisi-klien><strong>Lapisan Presentasi dan Otorisasi Sisi Klien</strong><a href=#lapisan-presentasi-dan-otorisasi-sisi-klien class=hash-link aria-label="Taut langsung ke lapisan-presentasi-dan-otorisasi-sisi-klien" title="Taut langsung ke lapisan-presentasi-dan-otorisasi-sisi-klien">​</a></h4>
<p>Lapisan terakhir yang perlu dipertimbangkan untuk penegakan adalah lapisan presentasi. Lapisan presentasi merujuk pada antarmuka pengguna (UI) apa pun, apakah itu halaman web yang dirender di server, aplikasi halaman tunggal, aplikasi baris perintah, atau situs web. Pada semua kasus tersebut, kode penegakan berjalan di sisi klien yang tidak dapat dipercaya. Karena ini mudah untuk diakali, kita hanya dapat menggunakan <strong>otorisasi sisi klien</strong> sebagai cara untuk memberikan pengalaman pengguna yang lebih baik.</p>
<p><strong>Apa itu otorisasi sisi klien?</strong></p>
<p>Otorisasi sisi klien merujuk pada penggunaan keputusan otorisasi di dalam antarmuka pengguna untuk menginformasikan apa yang diharapkan dapat dilakukan pengguna. Hal ini memberikan pengalaman pengguna yang lebih baik — <em>tidak ada yang ingin mengklik tombol hanya untuk mendapatkan pesan error</em>.</p>
<p><img decoding=async loading=lazy src=https://cdn.prod.website-files.com/5f1483105c9a72fd0a3b662a/60cb697fa193151c43ea3d33_ur-kWK-gujBk49pheg9GNoqNI77uUsqRnUlTHGGLzW0YfMOT1hjWus7C4WmVYlGAMv3f3gn5Vxat8HfNyM_JsDUPpZPU28x2RPv3ozpyXmIUJpexAoQNdSljP_ajqO2ZVZZCAZC4.avif alt='Contoh dialog "akses ditolak" tanpa konteks — pengalaman pengguna yang buruk' class=img_ev3q></p>
<p>Untuk menghindari hal tersebut, kita menggunakan otorisasi sisi klien untuk memprediksi apakah suatu permintaan akan diizinkan atau tidak. Jika permintaan tersebut akan ditolak, maka komponen antarmuka pengguna terkait bisa dinonaktifkan atau disembunyikan dari pengguna.</p>
<p>Lebih baik lagi, kita bisa menampilkan alasan mengapa suatu keputusan otorisasi dibuat kepada pengguna, sehingga mereka tahu dengan tepat mengapa mereka tidak dapat melakukan aksi tersebut.</p>
<p><img decoding=async loading=lazy src=https://cdn.prod.website-files.com/5f1483105c9a72fd0a3b662a/60cb699cc95594cb529dc070_p5asP-tOvUdjVbtAMhcsGChkDcvPb6aMl76IbyoHkAmpGlqOrLmdXN4h3Qn_9RdNwlERyS3gBrr8Cq4JyoJa6Z0pv0Enig7Vm-je4NHEc9Jg6dG_IzMUbiGACDItbk3WI0huTA-6.avif alt="Contoh tampilan pengaturan repository GitHub yang menjelaskan mengapa seorang anggota organisasi tidak diizinkan menghapus atau mentransfer repository" class=img_ev3q></p>
<p><strong>Apa yang harus ditegakkan?</strong></p>
<p>Salah satu tantangan utama dalam otorisasi sisi klien adalah bagaimana menjaga sinkronisasi dengan otorisasi yang diterapkan di backend.</p>
<p>Biasanya, Anda ingin menyembunyikan atau menampilkan komponen UI berdasarkan aksi apa yang diizinkan untuk dilakukan pengguna pada sebuah resource. Pola yang baik adalah meminta dari server informasi mengenai aksi apa saja yang diizinkan untuk pengguna saat ini. Dengan begitu, Anda tidak perlu menduplikasi logika otorisasi yang harus diimplementasikan oleh server, dan klien dapat menggunakan informasi tersebut sesuai kebutuhan.</p>
<p>Sebagai contoh, saat merender halaman "repository settings", kita dapat menghitung seluruh izin yang dimiliki pengguna saat ini untuk repository tersebut, misalnya “read”, “change_visibility”, dan “update”. Halaman web hanya perlu menerapkan logika sederhana: sembunyikan tombol delete jika izin “delete” tidak ada dalam daftar izin pengguna.</p>
<p>Namun, hal ini tetap menciptakan ketergantungan antara klien dan server: keduanya harus selalu sinkron mengenai aksi apa saja yang diperlukan untuk setiap endpoint pada server.</p>
<hr>
<p>Itulah penjelasan mengenai penegakan otorisasi berdasarkan lapisan dan level. Setiap lapisan memiliki tantangan dan pendekatan tersendiri, mulai dari penegakan di lapisan layanan hingga ke otorisasi sisi klien.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=3-ringkasan-kapan-menggunakan-setiap-level>3. Ringkasan: Kapan Menggunakan Setiap Level<a href=#3-ringkasan-kapan-menggunakan-setiap-level class=hash-link aria-label="Taut langsung ke 3. Ringkasan: Kapan Menggunakan Setiap Level" title="Taut langsung ke 3. Ringkasan: Kapan Menggunakan Setiap Level">​</a></h2>
<p>Ketika kita membahas di mana sebaiknya otorisasi dilakukan di Bab II, kita menyimpulkan bahwa otorisasi harus dilakukan di lapisan logika bisnis dan lapisan akses data. Di kedua tempat tersebut, konteks yang tersedia paling lengkap untuk menangani skenario otorisasi umum, seperti “apakah pengguna ini diizinkan membaca repository ini?”</p>
<p>Kita kini telah membahas dengan lebih rinci <strong>empat</strong> lapisan berbeda dalam arsitektur aplikasi di mana kita dapat menerapkan otorisasi, serta level otorisasi yang dapat diterapkan. Ringkasannya adalah bahwa setiap level otorisasi memiliki tempatnya masing-masing:</p>
<ul>
<li>
<p><strong>Tingkat Permintaan (Request-level):</strong><br>
<!-- -->Digunakan untuk mengekstrak langkah penegakan umum yang sama untuk seluruh permintaan. Level ini juga dapat digunakan sebagai lapisan tambahan (defense-in-depth) di atas otorisasi tingkat resource.</p>
</li>
<li>
<p><strong>Tingkat Resource (Resource-level):</strong><br>
<!-- -->Merupakan pilihan yang aman untuk sebagian besar skenario. Di level ini, seluruh konteks yang relevan tersedia untuk membuat keputusan otorisasi.</p>
</li>
<li>
<p><strong>Tingkat Query (Query-level):</strong><br>
<!-- -->Merupakan pendekatan yang kuat dan harus digunakan ketika Anda perlu menerapkan otorisasi tingkat resource ke seluruh dataset.</p>
</li>
<li>
<p><strong>Sisi Klien (Client-side):</strong><br>
<!-- -->Hanya merupakan lapisan tambahan di atas penegakan yang telah dilakukan di backend. Level ini sebaiknya digunakan di mana pun memungkinkan untuk membantu memberi sinyal kepada pengguna mengenai aksi apa yang dapat atau tidak dapat dilakukan.</p>
</li>
</ul>
<p>Dengan kata lain, terdapat banyak tempat di mana otorisasi mungkin terjadi, dan hal ini bisa menjadi sulit untuk dilacak! Anda harus memastikan bahwa <em>setidaknya</em> satu level otorisasi diterapkan sepanjang jalur permintaan.</p>
<p>Jika Anda ingin melihat contoh praktis, kami telah mendemonstrasikan penegakan otorisasi pada <a href=https://docs.osohq.com/guides/enforcement/resource.html target=_blank rel="noopener noreferrer">tingkat resource</a>, <a href=https://docs.osohq.com/guides/enforcement/field.html target=_blank rel="noopener noreferrer">tingkat field</a>, dan <a href=https://docs.osohq.com/guides/enforcement/request.html target=_blank rel="noopener noreferrer">tingkat permintaan</a> menggunakan Oso.</div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Halaman dokumentasi"><a class="pagination-nav__link pagination-nav__link--prev" href=/learning/guide-authorization/rabac><div class=pagination-nav__sublabel>Sebelum</div><div class=pagination-nav__label>Kontrol Akses Berdasarkan Hubungan (ReBAC)</div></a><a class="pagination-nav__link pagination-nav__link--next" href=/learning/guide-authorization/auth-microservices><div class=pagination-nav__sublabel>Berikut</div><div class=pagination-nav__label>Otorisasi dalam Microservices</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href=#1-apa-yang-dibahas-dalam-panduan-ini class="table-of-contents__link toc-highlight">1. Apa yang Dibahas dalam Panduan Ini</a><li><a href=#2-penegakan-otorisasi-berdasarkan-lapisan-dan-level class="table-of-contents__link toc-highlight">2. Penegakan Otorisasi Berdasarkan Lapisan dan Level</a><li><a href=#3-ringkasan-kapan-menggunakan-setiap-level class="table-of-contents__link toc-highlight">3. Ringkasan: Kapan Menggunakan Setiap Level</a></ul></div></div></div></div></main></div></div></div><footer class="bg-gray-100 dark:bg-slate-950/50"><div class="mx-auto max-w-7xl px-4 py-10"><div class="row footer__links"><div class="col footer__col"><div class=footer__title>Sosial Media</div><ul class="footer__items clean-list"><li class=footer__item><a href=https://www.facebook.com/lyrihkaesa.official target=_blank rel="noopener noreferrer" class=footer__link-item>Fanpage Kaesa Lyrih<svg width=13.5 height=13.5 aria-hidden=true viewBox="0 0 24 24" class=iconExternalLink_nPIU><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></svg></a><li class=footer__item><a href=https://twitter.com/lyrihkaesa target=_blank rel="noopener noreferrer" class=footer__link-item>Twitter<svg width=13.5 height=13.5 aria-hidden=true viewBox="0 0 24 24" class=iconExternalLink_nPIU><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></svg></a></ul></div><div class="col footer__col"><div class=footer__title>Komunitas</div><ul class="footer__items clean-list"><li class=footer__item><a href=https://www.facebook.com/groups/kaesatoramonline target=_blank rel="noopener noreferrer" class=footer__link-item>Facebook Kaesa Toram Online<svg width=13.5 height=13.5 aria-hidden=true viewBox="0 0 24 24" class=iconExternalLink_nPIU><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></svg></a><li class=footer__item><a href=https://discord.gg/z5GUceqyhB target=_blank rel="noopener noreferrer" class=footer__link-item>Discord Comunity<svg width=13.5 height=13.5 aria-hidden=true viewBox="0 0 24 24" class=iconExternalLink_nPIU><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></svg></a></ul></div><div class="col footer__col"><div class=footer__title>Lainnya</div><ul class="footer__items clean-list"><li class=footer__item><a href=https://github.com/lyrihkaesa target=_blank rel="noopener noreferrer" class=footer__link-item>GitHub<svg width=13.5 height=13.5 aria-hidden=true viewBox="0 0 24 24" class=iconExternalLink_nPIU><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></svg></a></ul></div></div><div class="footer__bottom text--center"><div class=footer__copyright>Copyright © 2025 ‧ Build with 💗 Kaesa Lyrih ‧ Templates by <a href=https://github.com/namnguyenthanhwork style="font-weight: bold;" target=_blank>Thành</a></div></div></div></footer></div>